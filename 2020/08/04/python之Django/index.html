<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><meta name="keywords" content="[object Object]"><meta name="description" content="一,Django基础1.安装通过pip安装Django。
在cmd命令行中输入下面代码，然后回车进行下载安装。"><meta name="author" content="zhi666"><title>python3之Django - 逸尘秀</title><meta description="一,Django基础1.安装通过pip安装Django。 在cmd命令行中输入下面代码，然后回车进行下载安装。"><meta property="og:type" content="article"><meta property="og:title" content="python3之Django"><meta property="og:url" content="https://yc6.cool/2020/08/04/python%E4%B9%8BDjango/"><meta property="og:site_name" content="逸尘秀"><meta property="og:description" content="一,Django基础1.安装通过pip安装Django。 在cmd命令行中输入下面代码，然后回车进行下载安装。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-08-04T04:12:36.000Z"><meta property="article:modified_time" content="2023-11-01T02:25:44.578Z"><meta property="article:author" content="zhi666"><meta property="article:tag" content="python"><meta property="article:tag" content="Django"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://yc6.cool/img/avatar.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yc6.cool/2020/08/04/python%E4%B9%8BDjango/"},"headline":"python3之Django","image":["https://yc6.cool/img/avatar.png"],"datePublished":"2020-08-04T04:12:36.000Z","dateModified":"2023-11-01T02:25:44.578Z","author":{"@type":"Person","name":"zhi666"},"description":"一,Django基础1.安装通过pip安装Django。 在cmd命令行中输入下面代码，然后回车进行下载安装。"}</script><link rel="alternative" href="/atom.xml" title="逸尘秀" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.12/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="逸尘秀" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">影音</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/self-talking">碎碎念</a><a class="navbar-item" href="/message">留言</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhi666"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-08-04  <a class="commentCountImg" href="/2020/08/04/python%E4%B9%8BDjango/#comment-container"><span class="display-none-class">0aea0a39a8ea64777683e6402e39acc7</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="0aea0a39a8ea64777683e6402e39acc7">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>1 小时  <i class="fas fa-pencil-alt"> </i>8.1 k</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">python3之Django</h1><div class="content"><h1 id="一-Django基础"><a href="#一-Django基础" class="headerlink" title="一,Django基础"></a>一,Django基础</h1><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1.安装"></a>1.安装</h3><p>通过pip安装Django。</p>
<p>在cmd命令行中输入下面代码，然后回车进行下载安装。</p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install Django&#x3D;&#x3D;2.2.6  -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple some-package</span><br><span class="line">pip install Django  #默认是安装最新的</span><br><span class="line">pip uninstall Django #卸载</span><br></pre></td></tr></table></figure>

<p>其中2.2.6为版本号，-i和后面是表示使用国内镜像进行下载。</p>
<p><strong>验证安装成功和查看版本</strong></p>
<p>在cmd命令行中输入pip list</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import django</span><br><span class="line">&gt;&gt;&gt; django.get_version()</span><br><span class="line">&#39;3.0.6&#39;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2，创建项目"><a href="#2，创建项目" class="headerlink" title="2，创建项目"></a>2，创建项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在合适的地方创建目录我命名Django1， cmd进入该目录输入命令</span><br><span class="line">django-admin startproject project   </span><br><span class="line"></span><br><span class="line">D:\py_work\Django1&gt;tree . &#x2F;F  #查看目录层级</span><br><span class="line"></span><br><span class="line">目录层级说明</span><br><span class="line">	manage.py    </span><br><span class="line">		一个命令行工具，可以使我们用多种方式对Django项目进行交互</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	project目录	</span><br><span class="line">		__init__.py  一个空文件，它告诉Python这个项目应该被看作是一个python包</span><br><span class="line">		settings.py  项目的配置文件</span><br><span class="line">		urls.py		 项目的url声明</span><br><span class="line">		wsgi.py		 项目与WSGI兼容的web服务器入口</span><br></pre></td></tr></table></figure>

<h3 id="3，Django基本操作"><a href="#3，Django基本操作" class="headerlink" title="3，Django基本操作"></a>3，Django基本操作</h3><p><strong>基本操作</strong></p>
<h3 id="1、设计表结构"><a href="#1、设计表结构" class="headerlink" title="1、设计表结构"></a><strong>1、设计表结构</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">设计表结构</span><br><span class="line"></span><br><span class="line">	班级表结构</span><br><span class="line">		表名:</span><br><span class="line">			Grades</span><br><span class="line">		</span><br><span class="line">		字段:</span><br><span class="line">			班级名称 gname</span><br><span class="line">			成立时间 gdate</span><br><span class="line">			女生总数 ggirlnum</span><br><span class="line">			男生总数 gboynum</span><br><span class="line">			是否删除 isDelete</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	表学生表结构</span><br><span class="line">		表名： </span><br><span class="line">			students</span><br><span class="line">		</span><br><span class="line">		字段：</span><br><span class="line">			学生姓名  sname</span><br><span class="line">			学生性别  sgender</span><br><span class="line">			学生年龄  sage</span><br><span class="line">			学生简介  scontend</span><br><span class="line">			所属班级  sgrade</span><br><span class="line">			是否删除  isDelete</span><br></pre></td></tr></table></figure>

<h3 id="2、配置数据库"><a href="#2、配置数据库" class="headerlink" title="2、配置数据库"></a>2、<strong>配置数据库</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">配置数据库</span><br><span class="line">注意: Django默认使用SQLite数据</span><br><span class="line">		在settings.py文件中。通过DATABASES选项进行数据库配置</span><br><span class="line">	配置MySQL </span><br><span class="line">		python3.x安装的是PyMySQL</span><br><span class="line">		在__init__.py写入两行代码</span><br><span class="line">			import pymysql</span><br><span class="line">			 pymysql.install_as_MySQLdb()</span><br><span class="line">		</span><br><span class="line">		配置mysql格式</span><br><span class="line">			DATABASES &#x3D; &#123;</span><br><span class="line">    			&#39;default&#39;: &#123;</span><br><span class="line">        	&#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,</span><br><span class="line">        	#&#39;NAME&#39;: os.path.join(BASE_DIR, &#39;db.sqlite3&#39;),</span><br><span class="line">       	 	&#39;NAME&#39;:&quot;yichen&quot;,</span><br><span class="line">        	&#39;USER&#39;:&quot;root&quot;,</span><br><span class="line">        	&#39;PASSWORD&#39;:&#39;密码&#39;,</span><br><span class="line">       	 	&#39;HOST&#39;:&quot;localhost&quot;,</span><br><span class="line">       		 &#39;PORT&#39;:&quot;3308&quot;,</span><br><span class="line">    		&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">	创建应用 </span><br><span class="line">		在一个项目中可以创建多个应用，每个应用进行一种业务处理</span><br><span class="line">		打开黑屏终端进入Django1\project目录</span><br><span class="line">			执行 python manage.py startapp  myApp   #myApp是自定义的名称</span><br><span class="line">			如果报错类似下面这个的文件出问题，就把确认版本的信息注释掉就可以了。							D:\Python\lib\site-packages\django\db\backends\mysql\base.py</span><br><span class="line">		myApp目录说明</span><br><span class="line">			admin.py    站点配置</span><br><span class="line">			models.py   模型</span><br><span class="line">			views.py    视图</span><br></pre></td></tr></table></figure>

<p><img src="D:\文档\屏幕截图文档插入图片\image-20200604005145597.png" alt="image-20200604005145597"></p>
<h3 id="3，激活应用"><a href="#3，激活应用" class="headerlink" title="3，激活应用"></a><strong>3，激活应用</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">激活应用</span><br><span class="line">	在setting.py文件中，将myApp应用加入到INSTALLED_APPS选项中</span><br><span class="line">		后面添加&#39;myApp&#39; 这个应用名称</span><br><span class="line">		</span><br><span class="line">		INSTALLED_APPS &#x3D; [</span><br><span class="line">    &#39;django.contrib.admin&#39;,</span><br><span class="line">    &#39;django.contrib.auth&#39;,</span><br><span class="line">    &#39;django.contrib.contenttypes&#39;,</span><br><span class="line">    &#39;django.contrib.sessions&#39;,</span><br><span class="line">    &#39;django.contrib.messages&#39;,</span><br><span class="line">    &#39;django.contrib.staticfiles&#39;,</span><br><span class="line">    &#39;myApp&#39;,</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

<p><strong>4.定义模型</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">概述: 有一个数据表，就对应有一个模型</span><br><span class="line"></span><br><span class="line">在models.py文件定义模型</span><br><span class="line">	引入包 from django.db import models  </span><br><span class="line">	模型类要继承models.Mode类，所以要映入</span><br><span class="line">	</span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># Create your models here.</span><br><span class="line">class Grades(models.Model):</span><br><span class="line">    gname &#x3D;models.CharField(max_length&#x3D;20)</span><br><span class="line">    gdate &#x3D; models.DateTimeField()</span><br><span class="line">    ggirlnum &#x3D; models.IntegerField()</span><br><span class="line">    gboynum &#x3D; models.IntegerField()</span><br><span class="line">    isDelete&#x3D; models.BooleanField(default&#x3D;False)</span><br><span class="line"></span><br><span class="line">class Students(models.Model):</span><br><span class="line">    sname &#x3D; models.CharField(max_length&#x3D;20)</span><br><span class="line">    sgender &#x3D; models.BooleanField(default&#x3D;True)</span><br><span class="line">    sage &#x3D; models.IntegerField()</span><br><span class="line">    scontend &#x3D; models.CharField(max_length&#x3D;20)</span><br><span class="line">    isDelete &#x3D; models.BooleanField(default&#x3D;False)</span><br><span class="line">    </span><br><span class="line">    #关联外键</span><br><span class="line">    #sgrade &#x3D; models.ForeignKey(&quot;Grades&quot;)</span><br><span class="line">    sgrade &#x3D; models.ForeignKey(&quot;Grades&quot;,on_delete&#x3D;models.CASCADE)</span><br><span class="line">	</span><br><span class="line">说明: 不需要定义主键，在生成时自动添加，并且值为自动增加的</span><br></pre></td></tr></table></figure>

<p><strong>5.生数据库中生成表</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">1、生成迁移文件 </span><br><span class="line">	在project目录下执行命令</span><br><span class="line">	 python manage.py makemigrations   在migrations目录下生成一个迁移文件，此时数据库中还没有生成数据表。</span><br><span class="line">	 如果报错on_delete，就需要定义外键的时候加上on_delete&#x3D;;</span><br><span class="line">	 即：sgrade &#x3D; models.ForeignKey(&quot;Grades&quot;,on_delete&#x3D;models.CASCADE)</span><br><span class="line"></span><br><span class="line">django 升级到2.0之后,表与表之间关联的时候,必须要写on_delete参数,否则会报异常:</span><br><span class="line">TypeError: init() missing 1 required positional argument: ‘on_delete’</span><br><span class="line"></span><br><span class="line">on_delete各个参数的含义如下：</span><br><span class="line">on_delete&#x3D;None,               # 删除关联表中的数据时,当前表与其关联的field的行为</span><br><span class="line">	on_delete&#x3D;models.CASCADE,     # 删除关联数据,与之关联也删除</span><br><span class="line">	on_delete&#x3D;models.DO_NOTHING,  # 删除关联数据,什么也不做</span><br><span class="line">	on_delete&#x3D;models.PROTECT,     # 删除关联数据,引发错误ProtectedError</span><br><span class="line">	# models.ForeignKey(&#39;关联表&#39;, on_delete&#x3D;models.SET_NULL, blank&#x3D;True, null&#x3D;True)</span><br><span class="line">	on_delete&#x3D;models.SET_NULL,    # 删除关联数据,与之关联的值设置为null（前提FK字段需要设置为可空,一对一同理）</span><br><span class="line">	# models.ForeignKey(&#39;关联表&#39;, on_delete&#x3D;models.SET_DEFAULT, default&#x3D;&#39;默认值&#39;)</span><br><span class="line">	on_delete&#x3D;models.SET_DEFAULT, # 删除关联数据,与之关联的值设置为默认值（前提FK字段需要设置默认值,一对一同理）</span><br><span class="line">	on_delete&#x3D;models.SET,         # 删除关联数据,</span><br><span class="line">	 a. 与之关联的值设置为指定值,设置：models.SET(值)</span><br><span class="line">	 b. 与之关联的值设置为可执行对象的返回值,设置：models.SET(可执行对象)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、执行迁移</span><br><span class="line">	在project目录下执行命令</span><br><span class="line">		python manage.py migrate</span><br><span class="line">		相当于执行了sql语句创建数据库表</span><br></pre></td></tr></table></figure>

<p><strong>6.测试数据操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">进入到python shell ,执行下面命令进入</span><br><span class="line">	python manage.py shell</span><br><span class="line">	</span><br><span class="line">引入包。 </span><br><span class="line">	from myApp.models import Grades,Students</span><br><span class="line">	from django.utils import timezone</span><br><span class="line">	from datetime import *</span><br><span class="line">	</span><br><span class="line">查询所有数据</span><br><span class="line">	类名.objects.all()</span><br><span class="line">	Grades.objects.all()</span><br><span class="line">	</span><br><span class="line">添加数据</span><br><span class="line">	本质: 创建一个模型类的对象实例</span><br><span class="line">	 gradel &#x3D; Grades()  #创建一个对象</span><br><span class="line">&gt;&gt;&gt; gradel.gname&#x3D; &quot;python04&quot;</span><br><span class="line">&gt;&gt;&gt; gradel.gdate &#x3D; datetime(year&#x3D;2017,month&#x3D;7,day&#x3D;17)</span><br><span class="line">&gt;&gt;&gt; gradel.ggirlnum &#x3D; 3</span><br><span class="line">&gt;&gt;&gt; gradel.gboynum &#x3D; 70</span><br><span class="line">&gt;&gt;&gt; gradel.save()</span><br><span class="line"></span><br><span class="line">查询某个对象</span><br><span class="line">	类名.obgects.get(pk&#x3D;id)</span><br><span class="line">	Grades.objects.get(pk&#x3D;2)</span><br><span class="line">	</span><br><span class="line">修改数据</span><br><span class="line">	 grade2.save()</span><br><span class="line">&gt;&gt;&gt; grade2.gboynum &#x3D; 60</span><br><span class="line">&gt;&gt;&gt; grade2.save()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">删除数据</span><br><span class="line">	模型对象.delete()</span><br><span class="line">	grade2.delete()</span><br><span class="line">	注意: 物理删除，数据库中的表里的数据被删除了</span><br><span class="line">	</span><br><span class="line">关联对象</span><br><span class="line">&gt;&gt;&gt; stu &#x3D; Students()</span><br><span class="line">&gt;&gt;&gt; stu.sname&#x3D;&quot;xueyanmei&quot;</span><br><span class="line">&gt;&gt;&gt; stu.ggender&#x3D;False</span><br><span class="line">&gt;&gt;&gt; stu.sage&#x3D; 20</span><br><span class="line">&gt;&gt;&gt; stu.scontend&#x3D;&quot;my name is xueyanmei&quot;</span><br><span class="line">&gt;&gt;&gt; stu.sgrade &#x3D; gradel</span><br><span class="line">&gt;&gt;&gt; stu.save()</span><br><span class="line"></span><br><span class="line">	获得关联对象的集合</span><br><span class="line">		需求: 获取python04班级的所有学生</span><br><span class="line">		对象名.关联类名小写_set.all()</span><br><span class="line">		stu.sgrade &#x3D;gradel</span><br><span class="line">		stu.save()</span><br><span class="line"> 		gradel.students_set.all()</span><br></pre></td></tr></table></figure>

<p><strong>7.启动服务器</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">格式:</span><br><span class="line">	python manage.py runserver ip:port</span><br><span class="line">	ip可以不写，不写的话代表本机ip</span><br><span class="line">	端口号默认是8000</span><br><span class="line">	python manage.py runserver</span><br><span class="line">	</span><br><span class="line">说明:</span><br><span class="line">	这是一个纯python写的轻量级web服务器,仅仅在开发测试环境使用。</span><br></pre></td></tr></table></figure>

<p><strong>8.Admin站点管理</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">概述:</span><br><span class="line">	内容发布  负责添加、修改、删除内容</span><br><span class="line">	公告访问</span><br><span class="line">	</span><br><span class="line">配置Admin应用</span><br><span class="line">	在settings.py文件中INSTALLED_APPS中添加&#39;django.contrib.admin&#39;</span><br><span class="line">	</span><br><span class="line">创建管理员用户</span><br><span class="line">	python manage.py  createsuperuser</span><br><span class="line">	输入用户名，默认是administrator ,</span><br><span class="line">	邮箱，密码123.shui 邮箱顺便乱写就可以。</span><br><span class="line">	登录admin页面 http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;admin&#x2F;</span><br><span class="line"></span><br><span class="line">管理页面默认是英文界面，汉化。</span><br><span class="line">	修改sttings.py文件里面的</span><br><span class="line">	LANGUAGE_CODE &#x3D; &#39;en-us&#39; 把值改为zh-Hans</span><br><span class="line">	TIME_ZONE &#x3D; &#39;UTC&#39; 		把值改为Asia&#x2F;Shanghai</span><br><span class="line">	然后直接刷新页面就可以，不用重启服务</span><br></pre></td></tr></table></figure>

<p><img src="D:\文档\屏幕截图文档插入图片\image-20200604032034546.png" alt="image-20200604032034546"></p>
<p><strong>管理数据表</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">修改admin.py文件</span><br><span class="line">	from .models import Grades,Students</span><br><span class="line">	#注册</span><br><span class="line">	admin.site.register(Grades)</span><br><span class="line">	admin.site.register(Students)</span><br><span class="line"></span><br><span class="line">然后刷新页面，如果报错就重启服务器。</span><br><span class="line">	就会有新增的两张表</span><br><span class="line"></span><br><span class="line">自定义管理页面</span><br><span class="line">	列表页属性</span><br><span class="line">		list_display    显示字段 要显示什么字段，就写什么字段。</span><br><span class="line">		list_filter		过滤字段</span><br><span class="line">		search_fields	搜索字段</span><br><span class="line">		list_per_page	分页</span><br><span class="line">	</span><br><span class="line">	添加、修改页属性</span><br><span class="line">		fields		属性的先后顺序</span><br><span class="line">		fieldsets	给属性分组 </span><br><span class="line">		注意: fields 与 fieldsets不能同时使用。</span><br></pre></td></tr></table></figure>

<p>admin.py详细内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line"></span><br><span class="line"># Register your models here.</span><br><span class="line">from .models import Grades,Students</span><br><span class="line"></span><br><span class="line">#注册</span><br><span class="line">class GradesAdmin(admin.ModelAdmin):</span><br><span class="line">    #列表页属性</span><br><span class="line">    list_display &#x3D; [&#39;pk&#39;,&#39;gname&#39;,&#39;gdate&#39;,&#39;ggirlnum&#39;,&#39;gboynum&#39;,&#39;isDelete&#39;]</span><br><span class="line">    list_filter &#x3D; [&#39;gname&#39;]</span><br><span class="line">    search_fields &#x3D;[&#39;gname&#39;]</span><br><span class="line">    list_per_page &#x3D; 5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #添加、修改页属性</span><br><span class="line">    #fields &#x3D; [&#39;ggirlnum&#39;,&#39;gboynum&#39;,&#39;gname&#39;,&#39;gdate&#39;,&#39;isDelete&#39;]</span><br><span class="line">    fieldsets &#x3D; [</span><br><span class="line">        (&quot;num&quot;,&#123;&quot;fields&quot;:[&#39;ggirlnum&#39;,&#39;gboynum&#39;]&#125;),</span><br><span class="line">        (&quot;base&quot;,&#123;&quot;fields&quot;:[&#39;gname&#39;,&#39;gdate&#39;,&#39;isDelete&#39;]&#125;),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">admin.site.register(Grades,GradesAdmin)</span><br><span class="line"></span><br><span class="line">class StudentsAdmin(admin.ModelAdmin):</span><br><span class="line">    list_display &#x3D; [&#39;pk&#39;,&#39;sname&#39;,&#39;sage&#39;,&#39;sgender&#39;,&#39;scontend&#39;,&#39;sgrade&#39;,&#39;isDelete&#39;]</span><br><span class="line">    list_per_page &#x3D; 2</span><br><span class="line">    search_fields &#x3D; [&#39;sname&#39;]</span><br><span class="line"></span><br><span class="line">admin.site.register(Students,StudentsAdmin)</span><br></pre></td></tr></table></figure>

<p><strong>关联对象</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">需求:</span><br><span class="line">	创建一个班级是可以直接添加几个学生</span><br><span class="line">	class STudentsInfo(admin.TabularInline) #StackedInline</span><br><span class="line">		model &#x3D; STudents</span><br><span class="line">		extra &#x3D;2</span><br><span class="line">	class GradesAdmin(admin.ModelAdmin)</span><br></pre></td></tr></table></figure>

<p><strong>布尔值显示问题</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class StudentsAdmin(admin.ModelAdmin):</span><br><span class="line"></span><br><span class="line">    def gender(self):</span><br><span class="line">        if self.sgender:</span><br><span class="line">            return &quot;男&quot;</span><br><span class="line">        else:</span><br><span class="line">            return &quot;女&quot;</span><br><span class="line">        #设置页面列的名称</span><br><span class="line">    gender.short_description &#x3D; &quot;性别&quot;</span><br><span class="line">    list_display &#x3D; [&#39;pk&#39;,&#39;sname&#39;,&#39;sage&#39;,gender,&#39;scontend&#39;,&#39;sgrade&#39;,&#39;isDelete&#39;]</span><br><span class="line">    list_per_page &#x3D; 2</span><br><span class="line">    search_fields &#x3D; [&#39;sname&#39;]</span><br></pre></td></tr></table></figure>

<p><strong>执行动作的位置问题</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#执行动作的位置</span><br><span class="line">   actions_on_top &#x3D; False</span><br><span class="line">   actions_on_bottom &#x3D; True</span><br></pre></td></tr></table></figure>

<p><strong>使用装饰器完成注册</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@admin.register(Students)</span><br><span class="line">class StudentsAdmin(admin.ModelAdmin):</span><br><span class="line"></span><br><span class="line">    def gender(self):</span><br><span class="line">        if self.sgender:</span><br><span class="line">            return &quot;男&quot;</span><br><span class="line">        else:</span><br><span class="line">            return &quot;女&quot;</span><br><span class="line">        #设置页面列的名称</span><br><span class="line">    gender.short_description &#x3D; &quot;性别&quot;</span><br><span class="line">    list_display &#x3D; [&#39;pk&#39;,&#39;sname&#39;,&#39;sage&#39;,gender,&#39;scontend&#39;,&#39;sgrade&#39;,&#39;isDelete&#39;]</span><br><span class="line">    list_per_page &#x3D; 2</span><br><span class="line">    search_fields &#x3D; [&#39;sname&#39;]</span><br><span class="line">    #执行动作的位置</span><br><span class="line">    actions_on_top &#x3D; False</span><br><span class="line">    actions_on_bottom &#x3D; True</span><br><span class="line"></span><br><span class="line">#admin.site.register(Students,StudentsAdmin)</span><br></pre></td></tr></table></figure>

<h3 id="3-Django视图的基本使用"><a href="#3-Django视图的基本使用" class="headerlink" title="3,Django视图的基本使用"></a>3,Django视图的基本使用</h3><p><strong>1,概述</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在django中，视图对web请求进行回应，视图就是一个python函数，在views.py文件中定义</span><br></pre></td></tr></table></figure>

<p><strong>2，定义视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from django.shortcuts import render</span><br><span class="line"></span><br><span class="line"># Create your views here.</span><br><span class="line"></span><br><span class="line">from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line"></span><br><span class="line">    return HttpResponse(&quot;yichen is a good man&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>3,配置url</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">修改project目录下的urls.py文件</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path</span><br><span class="line">from django.conf.urls import url,include</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    path(&#39;admin&#x2F;&#39;, admin.site.urls),</span><br><span class="line">    url(r&#39;^&#39;,include(&#39;myApp.urls&#39;)),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">在myApp目录下新建urls.py文件</span><br><span class="line"></span><br><span class="line">from django.conf.urls import url</span><br><span class="line"></span><br><span class="line">from . import views</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    url(r&#39;^$&#39;,views.index), #执行views目录下的一个index函数。</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="4，模板的基本使用"><a href="#4，模板的基本使用" class="headerlink" title="4，模板的基本使用"></a>4，模板的基本使用</h3><p><strong>1,概述</strong></p>
<p>模板是HTML页面，可以根据视图中传递过来的数据进行填充</p>
<p><strong>2,创建模板</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">创建templates目录，在目录下创建对应项目的模板目录(project&#x2F;templates&#x2F;myApp)</span><br></pre></td></tr></table></figure>

<p><strong>3,配置模板路径</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">修改settings文件下的TEMPLATES</span><br><span class="line"></span><br><span class="line">TEMPLATES &#x3D; [</span><br><span class="line">    &#123;</span><br><span class="line">        &#39;BACKEND&#39;: &#39;django.template.backends.django.DjangoTemplates&#39;,</span><br><span class="line">        &#39;DIRS&#39;: [os.path.join(BASE_DIR,&quot;templates&quot;)], #这里修改目录</span><br><span class="line">        &#39;APP_DIRS&#39;: True,</span><br></pre></td></tr></table></figure>

<p><strong>4，定义grades.html和students.html模板</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">模板语法</span><br><span class="line">	&#123;&#123;输出值，可以是变量，一个可以是对象属性&#125;&#125;</span><br><span class="line">	&#123;%执行代码段%&#125;</span><br></pre></td></tr></table></figure>

<p><strong>grades.html模板</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;班级信息&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;班级信息表&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;u1&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--    --[python04,python05,python06]--&gt;</span><br><span class="line">    &#123;%for grade in grades%&#125;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;#&quot;&gt;&#123;&#123;grade.gname&#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">    &lt;&#x2F;li&gt;</span><br><span class="line">    &#123;%endfor%&#125;</span><br><span class="line">&lt;&#x2F;u1&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>定义视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from .models import Grades</span><br><span class="line">def grades(request):</span><br><span class="line">    #去模板里取数据</span><br><span class="line">    gradesList &#x3D; Grades.objects.all()</span><br><span class="line"></span><br><span class="line">    #将数据传递给模板,模板在渲染页面，将渲染好的页面返回浏览器</span><br><span class="line">    return render(request, &quot;myApp&#x2F;grades.html&quot;,&#123;&quot;grades&quot;:gradesList&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>配置url</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from . import views</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    url(r&#39;^$&#39;,views.index), #执行views目录下的一个index函数。</span><br><span class="line">    url(r&#39;^(\d+)&#x2F;(\d+)$&#39;,views.detail),</span><br><span class="line">    url(r&quot;^grades&#x2F;$&quot;,views.grades),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h1 id="二，Django模型"><a href="#二，Django模型" class="headerlink" title="二，Django模型"></a>二，Django模型</h1><p>Django对各种数据库提供了很好的支持，Django为这些数据库提供了统一的API，可以根据不同的业务需求，选择不同的数据库</p>
<h2 id="1，Django模型流程"><a href="#1，Django模型流程" class="headerlink" title="1，Django模型流程"></a>1，Django模型流程</h2><h3 id="1，配置数据库"><a href="#1，配置数据库" class="headerlink" title="1，配置数据库"></a><strong>1，配置数据库</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">1、修改工程目录下的__init__.py文件</span><br><span class="line">	import pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line"></span><br><span class="line">2、在settings.py文件中。通过DATABASES选项进行数据库配置</span><br><span class="line">	配置MySQL</span><br><span class="line">DATABASES &#x3D; &#123;</span><br><span class="line">    	&#39;default&#39;: &#123;</span><br><span class="line">        &#39;ENGINE&#39;: &#39;django.db.backends.mysql&#39;,</span><br><span class="line">        #&#39;NAME&#39;: os.path.join(BASE_DIR, &#39;db.sqlite3&#39;),</span><br><span class="line">       	&#39;NAME&#39;:&quot;yichen2&quot;,</span><br><span class="line">        &#39;USER&#39;:&quot;root&quot;,</span><br><span class="line">        &#39;PASSWORD&#39;:&#39;123.shui&#39;,</span><br><span class="line">       	&#39;HOST&#39;:&quot;localhost&quot;,</span><br><span class="line">       	&#39;PORT&#39;:&quot;3308&quot;,</span><br><span class="line">    		&#125;</span><br><span class="line">			&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2，开发流程"><a href="#2，开发流程" class="headerlink" title="2，开发流程"></a><strong>2，开发流程</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1、配置数据库</span><br><span class="line"></span><br><span class="line">2、定义模型类</span><br><span class="line">	一个模型类都在数据库对应一张数据表</span><br><span class="line"></span><br><span class="line">3、生成迁移文件</span><br><span class="line">	python manage.py makemigrations</span><br><span class="line">4、执行迁移生成数据表</span><br><span class="line">	python manage.py migrate</span><br><span class="line">5、使用模型进行增删改查(crud) 操作</span><br></pre></td></tr></table></figure>

<h3 id="3-ORM"><a href="#3-ORM" class="headerlink" title="3,ORM"></a><strong>3,ORM</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">概述 </span><br><span class="line">	对象 关系 映射</span><br><span class="line"></span><br><span class="line">任务 </span><br><span class="line">	根据对象的类型生成表结构</span><br><span class="line">	将对象、列表的操作转换为sql语句</span><br><span class="line">	将sql语句查询到的结构转换为对象、列表</span><br><span class="line"></span><br><span class="line">优点 </span><br><span class="line">	极大的减轻了开发人员的工作量，不需要面对因数据库的变更而改变。</span><br></pre></td></tr></table></figure>

<h3 id="4，定义模型"><a href="#4，定义模型" class="headerlink" title="4，定义模型"></a><strong>4，定义模型</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">1、模型、属性、表、字段间的关系</span><br><span class="line">	一个模型类在数据库中对应一张表，在模型类中定义的属性，对应该模型对照表中的一个字段。</span><br><span class="line">	</span><br><span class="line">2、定义属性</span><br><span class="line">概述:</span><br><span class="line">	1、django根据属性的类型确定以下信息</span><br><span class="line">		1，当前选择的数据库支持字段的类型</span><br><span class="line">		2，渲染管理表单时使用的默认html控件</span><br><span class="line">		3，在管理站点最低限度的验证</span><br><span class="line">	</span><br><span class="line">	2、django会为表增加自动增长的主键列，每个模型只能有一个主键列，如果使用选项设置某属性为主键列后，则django不会再生成默认的主键列</span><br><span class="line">	</span><br><span class="line">	3、属性命名限制</span><br><span class="line">		1,不能是python的保留关键字，遵循标识符规则</span><br><span class="line">		2,由于django的查询方式，不允许使用连续的下划线</span><br><span class="line"></span><br><span class="line">库</span><br><span class="line">	定义属性时，需要字段类型，字段类型被定义在django.db.models.fields目录下，为了方便使用，被导入到django.db.models中</span><br><span class="line">	</span><br><span class="line">	使用方式</span><br><span class="line">		导入from django.db import models  </span><br><span class="line">		通过models.Field创建字段类型的对象，赋值给属性</span><br><span class="line">		</span><br><span class="line">	4、逻辑删除</span><br><span class="line">		对于重要数据都要做逻辑删除，不做物理删除，实现方法时定义isDelete属性，类型为BooleanField,默认值为False</span><br><span class="line">		</span><br><span class="line">	5、字段类型</span><br><span class="line">		AutoField</span><br><span class="line">			一个根据实际id自动增长的IntegerField,通常不指定，如果不指定一个主键字段将自动添加到模型中</span><br><span class="line">		</span><br><span class="line">		CharField(max_length&#x3D;字段长度)</span><br><span class="line">			字符串，默认的表单样式是 TextInput</span><br><span class="line">		</span><br><span class="line">		TextField</span><br><span class="line">			大文本字段，一般超过4000使用，默认的表单控件是Textarea</span><br><span class="line">			</span><br><span class="line">		IntegerField</span><br><span class="line">			整数</span><br><span class="line">		</span><br><span class="line">		DecimalField(max_digits&#x3D;None,decimal_places&#x3D;None)</span><br><span class="line">			使用python的Decimal实例表示的十进制浮点数</span><br><span class="line">			参数说明</span><br><span class="line">				DecimalField.max_digits</span><br><span class="line">					位数总数  			3.1415926 总数是8</span><br><span class="line">				DecimalField.decimal_places</span><br><span class="line">					小数点后的数字位数	 3.1415926 位数是7</span><br><span class="line">					</span><br><span class="line">		FloatField</span><br><span class="line">        	用Python的float实例来表示的浮点数</span><br><span class="line">        BooleanField</span><br><span class="line">        	true&#x2F;false 字段，此字段的默认表单控制是CheckboxInput</span><br><span class="line">        </span><br><span class="line">        NullBooleanField</span><br><span class="line">        	支持null、true、false三种值</span><br><span class="line">        	</span><br><span class="line">        DateField([auto_now&#x3D;False, auto_now_add&#x3D;False])</span><br><span class="line">        	使用Python的datetime.date实例表示的日期</span><br><span class="line">        	参数说明</span><br><span class="line">        		DateField.auto_now</span><br><span class="line">        			每次保存对象时，自动设置改字段为当前时间，用于“最后一次修改” 的时间戳，它总是使用当前日期，默认为false</span><br><span class="line">        		DateField.auto_now_add</span><br><span class="line">        			当前对象第一次被创建时自动设置当前时间，用于创建的时间戳，它总是使用当前时间，默认为false</span><br><span class="line">        	</span><br><span class="line">         	说明</span><br><span class="line">         		该字段默认对应的表单控件是一个TextInput,在管理站点添加了一个JavaScript写的日历控件，和一个&quot;Today&quot; 的快捷按钮。包含了一个额外的invalid_date错误消息键。</span><br><span class="line">        	注意: </span><br><span class="line">        		auto_now_add, auto_now, add default 这些设置是相互排斥的，他们之间的任何组合将发生错误的结果</span><br><span class="line">        		</span><br><span class="line">        TimeField</span><br><span class="line">        	使用Python的datetime.time的实例表示的时间，参数同DateField</span><br><span class="line">        DateTimeField</span><br><span class="line">        	使用Python的datetime</span><br><span class="line">        	datetime实例表示的日期和时间，参数同DateField</span><br><span class="line">        </span><br><span class="line">        FileField</span><br><span class="line">        	一个上传文件的字段</span><br><span class="line">        </span><br><span class="line">        ImageField</span><br><span class="line">        	继承了FileField的所有属性和方法，但对上传的对象进行校验，</span><br><span class="line">        	确保它是个有效的Image</span><br><span class="line">        	</span><br><span class="line">	7、字段选项</span><br><span class="line">		概述:</span><br><span class="line">			通过字段选项，可以实现对字段的约束</span><br><span class="line">			在字段对象时通过关键字参数指定</span><br><span class="line">			</span><br><span class="line">		null</span><br><span class="line">			如果为True, Django 将空值以NULL 存储到数据库中，默认值是 False</span><br><span class="line">			</span><br><span class="line">		blanke</span><br><span class="line">			如果为True, 则该字段允许为空白，默认是False</span><br><span class="line">		注意:</span><br><span class="line">        	null是数据库范畴的概念，blank是表单验证范畴的概念</span><br><span class="line">		</span><br><span class="line">		db_column</span><br><span class="line">			字段的名称，如果未指定，则使用属性的名称</span><br><span class="line">		</span><br><span class="line">		db_index</span><br><span class="line">			若值为True, 则在表中会为此字段创建索引</span><br><span class="line">		</span><br><span class="line">		default</span><br><span class="line">			默认值</span><br><span class="line">		</span><br><span class="line">		primary_key</span><br><span class="line">			若为True, 则该字段会成为模型的主键字段</span><br><span class="line">			</span><br><span class="line">		unique</span><br><span class="line">			如果为True,这个字段在表中必须有唯一值</span><br><span class="line">			</span><br><span class="line">	8、关系</span><br><span class="line">		分类</span><br><span class="line">			ForeignKey: 一对多，将字段定义在多的端中</span><br><span class="line">			ManyToManyField:多对多，将字段定义在两端中，</span><br><span class="line">			OneToOneField: 一对一，将字段定义在任意一端中</span><br><span class="line">			</span><br><span class="line">		用一访问多</span><br><span class="line">			格式</span><br><span class="line">				对象.模型类小写_et</span><br><span class="line">			示例</span><br><span class="line">				grade.students_set</span><br><span class="line">				</span><br><span class="line">		用一访问一</span><br><span class="line">			格式</span><br><span class="line">				对象.模型类小写 </span><br><span class="line">			示例</span><br><span class="line">				grade.students</span><br><span class="line">		</span><br><span class="line">		访问id</span><br><span class="line">			格式</span><br><span class="line">				对象.属性_id</span><br><span class="line">			示例</span><br><span class="line">				student.sgrade_id</span><br></pre></td></tr></table></figure>

<h4 id="创建模型类"><a href="#创建模型类" class="headerlink" title="创建模型类"></a><strong>创建模型类</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># Create your models here.</span><br><span class="line">class Grades(models.Model):</span><br><span class="line">    gname &#x3D;models.CharField(max_length&#x3D;20)</span><br><span class="line">    gdate &#x3D; models.DateTimeField()</span><br><span class="line">    ggirlnum &#x3D; models.IntegerField()</span><br><span class="line">    gboynum &#x3D; models.IntegerField()</span><br><span class="line">    isDelete&#x3D; models.BooleanField(default&#x3D;False)</span><br><span class="line">    # def __str__(self):</span><br><span class="line">    #     return &quot;%s-%d-%d&quot;%(self.gname,self.ggirlnum,self.gboynum)</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &quot;%s&quot;%(self.gname)</span><br><span class="line">    class Meta:</span><br><span class="line">        db_table &#x3D;&quot;grades&quot;</span><br><span class="line"></span><br><span class="line">class Students(models.Model):</span><br><span class="line">    sname &#x3D; models.CharField(max_length&#x3D;20)</span><br><span class="line">    sgender &#x3D; models.BooleanField(default&#x3D;True)</span><br><span class="line">    sage &#x3D; models.IntegerField(db_column&#x3D;&quot;age&quot;)</span><br><span class="line">    scontend &#x3D; models.CharField(max_length&#x3D;20)</span><br><span class="line">    isDelete &#x3D; models.BooleanField(default&#x3D;False)</span><br><span class="line"></span><br><span class="line">    #关联外键</span><br><span class="line">    #sgrade &#x3D; models.ForeignKey(&quot;Grades&quot;,on_delete&#x3D;models.CASCADE)</span><br><span class="line">    sgrade &#x3D; models.ForeignKey(&quot;Grades&quot;,on_delete&#x3D;models.DO_NOTHING )</span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &quot;%s&quot;%(self.sage)</span><br><span class="line">    lastTime &#x3D; models.DateTimeField(auto_now&#x3D;True)</span><br><span class="line">    createTime &#x3D; models.DateTimeField(auto_now_add&#x3D;True)</span><br><span class="line">    class Meta:</span><br><span class="line">        db_table &#x3D;&quot;students&quot;</span><br><span class="line">        ordering&#x3D;[&#39;id&#39;]</span><br></pre></td></tr></table></figure>

<h4 id="元选项"><a href="#元选项" class="headerlink" title="元选项"></a><strong>元选项</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在模型类中定义Meta类，用于设置 元信息</span><br><span class="line"></span><br><span class="line">db_table</span><br><span class="line">	定义数据表名，推荐使用小写字母，数据表名默认为项目名小写_类名小写</span><br><span class="line">	</span><br><span class="line">ordering</span><br><span class="line">	对象的默认字段排序，获取对象的列表时使用</span><br><span class="line">	ordering[id]   升序</span><br><span class="line">	ordering[-id]  降序</span><br><span class="line">	注意: 排序会增加数据库的开销</span><br></pre></td></tr></table></figure>

<h4 id="模型成员"><a href="#模型成员" class="headerlink" title="模型成员"></a><strong>模型成员</strong></h4><p>类属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">类属性</span><br><span class="line">	objects  是Manager类型的一个对象，作用是与数据库进行交互</span><br><span class="line">			当定义模型类是没有指定管理器，则Django为模型创建一个名为objects的管理器</span><br><span class="line">	自定义管理器</span><br><span class="line">		#自定义模型管理器</span><br><span class="line">    	#当自定义管理器，objects就不存在了</span><br><span class="line">    	stuObj &#x3D; models.Manager()</span><br><span class="line">		当为模型指定模型管理器，Django就不在为模型类生成objects模型管理器。</span><br><span class="line">		</span><br><span class="line">	自定义管理器Manager类</span><br><span class="line">    	模型管理器是Django的模型进行与数据库进行交互的接口，一个模型可以有多个模型管理器</span><br><span class="line">    	</span><br><span class="line">    	作用</span><br><span class="line">    		向管理器类中添加额外的方法</span><br><span class="line">    		修改管理器返回的原始查询集 重新get_queryset()方法</span><br><span class="line">    	</span><br><span class="line">    	代码示例</span><br><span class="line">    	class StudentsManager(models.Manager):</span><br><span class="line">    def get_queryset(self):</span><br><span class="line"></span><br><span class="line">        return super(StudentsManager,self).get_queryset().filter(isDelete&#x3D;False)</span><br><span class="line"></span><br><span class="line">class Students(models.Model):</span><br><span class="line">    # 自定义模型管理器</span><br><span class="line">    # 当自定义管理器，objects就不存在了</span><br><span class="line">    stuObj &#x3D; models.Manager()</span><br><span class="line">    stuObj2 &#x3D; StudentsManager()</span><br></pre></td></tr></table></figure>

<p>创建对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">目的</span><br><span class="line">	向数据库中添加数据</span><br><span class="line">	</span><br><span class="line">当创建对象时， django不会对数据库进行读写操作，当调用save()方式时才会与数据库交互，将对象保存到数据库中。</span><br><span class="line"></span><br><span class="line">注意: __init__方法已经在父类models.Model中使用，在自定义的模式中无法使用。。</span><br><span class="line"></span><br><span class="line">方法 </span><br><span class="line">	在模型类中增加一个类方法</span><br><span class="line">	在定义管理</span><br></pre></td></tr></table></figure>

<h4 id="模型查询"><a href="#模型查询" class="headerlink" title="模型查询"></a><strong>模型查询</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">概述</span><br><span class="line">	查询集表示从数据库获取的对象集合</span><br><span class="line">	查询集可以有多个过滤器</span><br><span class="line">	过滤器就是一个函数，基于所给的参数限制查询集结果</span><br><span class="line">	从sql角度来说，查询集合select语句等价，过滤器就像where条件</span><br><span class="line">	</span><br><span class="line">查询集</span><br><span class="line">	在管理器上调用过滤器方法返回查询集</span><br><span class="line">	查询集经过过滤器诗选后返回新的查询集，所以科研写成链式调用</span><br><span class="line">	情性执行， 创建查询集不会带来任何数据的访问，直接调用数据时，才会访问数据</span><br><span class="line">	</span><br><span class="line">	1、直接访问数据的情况</span><br><span class="line">		迭代</span><br><span class="line">		序列化</span><br><span class="line">		与if合用</span><br><span class="line">	2、返回查询集的方法称为过滤器</span><br><span class="line">		all()      返回查询中的所有数据</span><br><span class="line">		filter()   返回符合条件的数据</span><br><span class="line">			filter(键&#x3D;值 键&#x3D;值)</span><br><span class="line">			filter(键&#x3D;值).(键&#x3D;值)</span><br><span class="line">		exclude()  过滤掉符合条件的数据</span><br><span class="line">		order_by()  排序</span><br><span class="line">		values() 	一个字典，返回一个列表</span><br><span class="line">		</span><br><span class="line">	3、返回单个数据</span><br><span class="line">		get()  </span><br><span class="line">			返回一个满足条件的对象，</span><br><span class="line">			注意: 如果没有找到符合条件的对象，会引发模型类DoesNoteExist异常，如果找到多个对象，会引发模型类MultipleObjectsReturned at异常。</span><br><span class="line">			</span><br><span class="line">		count()		返回当前查询集中的对象个数</span><br><span class="line">		first()		返回查询集中的第一个对象</span><br><span class="line">		last()		返回查询集中的最后一个对象</span><br><span class="line">		</span><br><span class="line">		exists()   判断查询集中是否有数据，如果有数据返回True,没有数据返回false.</span><br><span class="line">		</span><br><span class="line">	4、限制查询集</span><br><span class="line">		查询集返回列表。可以使用下标的方法进行限制，等同于sql中的limit语句</span><br><span class="line">		studentList&#x3D; Students.stuObj2.all()[0:5]</span><br><span class="line">		注意: 下标不能是负数</span><br><span class="line">		</span><br><span class="line">	5、查询集的缓存</span><br><span class="line">		概述: </span><br><span class="line">			每个查询集都包含一个缓存。来最小化的对数据库访问</span><br><span class="line">			在新建的查询集中，缓存首次为空，第一次对查询集求值，会发生数据缓存。Django会将查询出来的数据做一个缓存，并返回查询结构，以后的查询直接使用查询缓存。</span><br><span class="line">		</span><br><span class="line">	6、字段查询</span><br><span class="line">    	概述:</span><br><span class="line">    		实现了sql中的where语句，作为方法filter(),exclude(),get()的参数</span><br><span class="line">    		语法 属性名称__比较运算符&#x3D;值</span><br><span class="line">    		外键 属性名_id</span><br><span class="line">    		转义 like语句中使用%是为了匹配占位。匹配数据中的%(where like \%)</span><br><span class="line">    		</span><br><span class="line">    	比较运算符:</span><br><span class="line">    		exact</span><br><span class="line">            	判断。大小写敏感</span><br><span class="line">    			filter(isDelete&#x3D;False)</span><br><span class="line">    			</span><br><span class="line">    		contains</span><br><span class="line">    			是否包含，大小写敏感</span><br><span class="line">    			ctudentSlist &#x3D; Students.stuObj2.filter(sname__contains&#x3D;&quot;sui&quot;)</span><br><span class="line">    		startswith、endswith </span><br><span class="line">    			以value开头或结尾。大小写敏感</span><br><span class="line">    		以上四个个在前面加上i,表示不区分大小写，iexact、icontains、istartswith、iendswith。</span><br><span class="line">    			</span><br><span class="line">    		isnull,isnotnull 是否为空</span><br><span class="line">    		</span><br><span class="line">    		in  是否包含在范围内</span><br><span class="line">    			studentsList&#x3D;Students.stuObj2.filter(pk__in&#x3D;[2,4,6,8,10])</span><br><span class="line">    			</span><br><span class="line">    		gt		大于  studentsList&#x3D;Students.stuObj2.filter(sage__gt&#x3D;30)</span><br><span class="line">    		gte		大于等于</span><br><span class="line">    		lt		小于</span><br><span class="line">    		lte		小于等于</span><br><span class="line">    </span><br><span class="line">    		year	年 studentsList&#x3D;Students.stuObj2.filter(lastTime__year&#x3D;2017)</span><br><span class="line">    		month   月</span><br><span class="line">    		day		天</span><br><span class="line">    		week_day 周</span><br><span class="line">    		hour	小时</span><br><span class="line">    		minute	分钟</span><br><span class="line">    		second	秒</span><br><span class="line">    		</span><br><span class="line">    		查询快键</span><br><span class="line">    		  pk 代表主键</span><br><span class="line">    		  </span><br><span class="line">    	</span><br><span class="line">	</span><br><span class="line">		聚合函数</span><br><span class="line">		 	Count</span><br><span class="line">		 	Max</span><br><span class="line">		 	Min</span><br><span class="line">		 	Sum</span><br><span class="line">		 </span><br><span class="line">		 F对象</span><br><span class="line">		 	可以使用模型的A属性与B属性进行比较</span><br><span class="line">		 	支持F对象的算术运算。</span><br><span class="line">		 	 </span><br><span class="line">		</span><br><span class="line">		Q对象</span><br><span class="line">			概述。过滤器的方法中的关键字参数。条件为And模式</span><br><span class="line">		    需求  进行or查询</span><br><span class="line">            解决  使用Q对象</span><br><span class="line">            </span><br><span class="line">            studentsList &#x3D; Students.stuObj2.filter(Q(pk__lte&#x3D;3)|Q(sage__gt&#x3D;50))</span><br><span class="line">            studentsList &#x3D; Students.stuObj2.filter(Q(pk__lte&#x3D;3)) 只有一个Q对象，就是用于匹配的。</span><br></pre></td></tr></table></figure>

<h1 id="三、Django视图基础"><a href="#三、Django视图基础" class="headerlink" title="三、Django视图基础"></a><strong>三、Django视图基础</strong></h1><p>概述</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1、作用： 视图接受web请求，并响应web请求</span><br><span class="line">2、本质:  视图就是一个python中的函数</span><br><span class="line"></span><br><span class="line">3、响应:</span><br><span class="line">	1.网页</span><br><span class="line">		 重定向</span><br><span class="line">		 错误视图</span><br><span class="line">				404</span><br><span class="line">				500</span><br><span class="line">				400</span><br><span class="line">	2.JSON数据</span><br><span class="line">4、过程</span><br><span class="line">	1.用户在浏览器中输入网址</span><br><span class="line">    2.Django获取网址信息，去除ip与端口，获取虚拟路径与文件名</span><br><span class="line">    3.url管理器 逐个匹配urlconf 记录视图函数名</span><br><span class="line">    4.视图管理器找到对应的视图去执行。返回给浏览器。</span><br></pre></td></tr></table></figure>

<h2 id="1、url配置"><a href="#1、url配置" class="headerlink" title="1、url配置"></a>1、url配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">1、配置流程</span><br><span class="line">	制定跟级url配置文件 在setting.py文件中的这里面。</span><br><span class="line">	  		ROOT_URLCONF &#x3D; &#39;project.urls&#39;  默认已经配置好了。</span><br><span class="line">	</span><br><span class="line">	urlpatterns</span><br><span class="line">			一个url实例的列表</span><br><span class="line">			url对象。url(r&#39;^students&#x2F;$&#39;,views.students),</span><br><span class="line">				正则表达式</span><br><span class="line">				视图名称</span><br><span class="line">				名称</span><br><span class="line">				</span><br><span class="line">	url匹配正则的注意事项</span><br><span class="line">		如果想要从url中获取一个值。需要对正则加小阔号。</span><br><span class="line">        匹配正则前方不需要加斜杠&#x2F;</span><br><span class="line">        正则前需要加r表示字符串不转义。</span><br><span class="line"></span><br><span class="line">2、引入其他url配置</span><br><span class="line">	在应用中创建urls.py文件，定义本应用的url配置，在工程中urls.py文件中使用include()方法</span><br><span class="line">project&#x2F;urls.py文件</span><br><span class="line"></span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path</span><br><span class="line">from django.conf.urls import url,include</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    path(&#39;admin&#x2F;&#39;, admin.site.urls),</span><br><span class="line">    url(r&#39;^&#39;, include((&#39;myApp.urls&#39;,&#39;myApp&#39;),namespace&#x3D;&quot;myApp&quot;)),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myApp&#x2F;urls.py文件。</span><br><span class="line"></span><br><span class="line">from django.conf.urls import url,include</span><br><span class="line">from . import views</span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line"></span><br><span class="line">    url(r&#39;^$&#39;, views.index,name&#x3D;&quot;index&quot;),</span><br><span class="line"></span><br><span class="line">    url(r&#39;^students&#x2F;$&#39;,views.students),</span><br><span class="line">    url(r&#39;^addstudent&#x2F;$&#39;,views.addstudent),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-url的反向解析"><a href="#1-url的反向解析" class="headerlink" title="1.url的反向解析"></a>1.url的反向解析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">概述</span><br><span class="line">	如果在视图、模板中使用了硬编码连接。在url配置发生改变时。动态生成连接的地址</span><br><span class="line">解决 </span><br><span class="line">	在使用链接时，通过url配置的名称，动态生成url地址</span><br><span class="line"></span><br><span class="line">作用</span><br><span class="line">	 使用url模板</span><br></pre></td></tr></table></figure>

<h2 id="2，视图函数"><a href="#2，视图函数" class="headerlink" title="2，视图函数"></a>2，视图函数</h2><p><strong>1.定义视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">本质: 一个函数</span><br><span class="line">视图参数:</span><br><span class="line">	一个HttpRequest的实例</span><br><span class="line">	通过正则表达式获取的参数</span><br><span class="line">位置:</span><br><span class="line">	 一般在views.py文件下定义</span><br></pre></td></tr></table></figure>

<p><strong>2.错误视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">404视图 </span><br><span class="line">	找不到网页url匹配不成功的视图</span><br><span class="line">	</span><br><span class="line">	在templates目录下定义404.html</span><br><span class="line">			request_path 导致错误的网址。</span><br><span class="line">			</span><br><span class="line">	配置settings.py文件	</span><br><span class="line">    	DEBUG &#x3D; False 如果为True永远不会调用404.html页面。 </span><br><span class="line">    	ALLOWED_HOSTS &#x3D; [&quot;*&quot;]</span><br><span class="line">	</span><br><span class="line">400视图 错误出现在客户的操作</span><br><span class="line">	</span><br><span class="line">500视图 在视图代码中出现错误(服务器代码)</span><br></pre></td></tr></table></figure>

<h3 id="3，HttpRequest对象"><a href="#3，HttpRequest对象" class="headerlink" title="3，HttpRequest对象"></a>3，HttpRequest对象</h3><p><strong>概述</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">服务器接收http请求后，会根据报文创建httpRequest对象</span><br><span class="line">视图的第一个参数就是httpRequest对象。</span><br><span class="line">django创建的。之后调用视图时传递给视图</span><br></pre></td></tr></table></figure>

<p><strong>属性</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">path</span><br><span class="line">	请求的完整路径(不包括域名和端口)</span><br><span class="line"></span><br><span class="line">method</span><br><span class="line">	表示请求的方式，常用的有get、post</span><br><span class="line">	</span><br><span class="line">encoding </span><br><span class="line">	表示浏览器提交的数据的编码方式 一般为utf-8,</span><br><span class="line"></span><br><span class="line">GET</span><br><span class="line">	类似字典的对象，包含了get请求的所有参数</span><br><span class="line"></span><br><span class="line">POST</span><br><span class="line">	类似字典的对象，包含了post请求的所有参数</span><br><span class="line">	</span><br><span class="line">FILES</span><br><span class="line">	类似字典的对象，包含了所有上传额文件</span><br><span class="line"></span><br><span class="line">COOKIES</span><br><span class="line">	字典，包含了所有的cookie</span><br><span class="line">	</span><br><span class="line">session</span><br><span class="line">	类似字典的对象，表示当前会话。</span><br></pre></td></tr></table></figure>

<p><strong>方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">is_ajax()</span><br><span class="line">	如果是通过XMHttpReauest发起的，返回True</span><br></pre></td></tr></table></figure>

<p><strong>QueryDict</strong>对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">request对象中的GET、POST都属于QueryDict对象</span><br><span class="line"></span><br><span class="line">方法</span><br><span class="line">	get()</span><br><span class="line">		作用：根据键获取值</span><br><span class="line">		只能获取一个值</span><br><span class="line">	getlist()</span><br><span class="line">		将键的值以列表的形式返回</span><br><span class="line">		只能获取一个值</span><br></pre></td></tr></table></figure>

<p><strong>get属性</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;get1?a&#x3D;1&amp;b&#x3D;2c&#x3D;3</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;get2?a&#x3D;1&amp;b&#x3D;2c&#x3D;3</span><br></pre></td></tr></table></figure>

<p><strong>post属性</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用表单实现post请求。</span><br></pre></td></tr></table></figure>

<p><strong>HttpResponse对象</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">概述</span><br><span class="line">  作用: 给浏览器返回数据</span><br><span class="line">  HttpRequest对象时有Django创建，HttpResponse对象有程序员创建。</span><br><span class="line"> </span><br><span class="line">返回用法:</span><br><span class="line">   不调用模板，</span><br><span class="line">   def index(request):</span><br><span class="line">    return HttpResponse(&quot;yichen2 is a good man&quot;)</span><br><span class="line">    </span><br><span class="line">    调用模板</span><br><span class="line">    </span><br><span class="line">    使用render方法。</span><br><span class="line">    	原型 render(request, templateName[context])</span><br><span class="line">    	作用 结合页面数据和模板，返回完整的HTML页面</span><br><span class="line">    	</span><br><span class="line">    	参数</span><br><span class="line">    		request  请求体对象</span><br><span class="line">    		templateName  模板路径</span><br><span class="line">    		context   传递给需要渲染在模型上的数据。</span><br><span class="line">    </span><br><span class="line">属性</span><br><span class="line">	content  		表示返回的内容</span><br><span class="line">	charset  		编码格式</span><br><span class="line">	status_code		响应的状态码 200 304 404 等等</span><br><span class="line">	content-type	指定输出的mimr类型</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">方法</span><br><span class="line">	init  			使用页面的内容实例化HttpReponse对象</span><br><span class="line">	</span><br><span class="line">	write(content)	以文本的形式写入。</span><br><span class="line">	</span><br><span class="line">	flush()    		以文本的形式输出缓冲区</span><br><span class="line">	set_cookie(key,value&#x3D;&quot;&quot;,max_age&#x3D;None,exprise&#x3D;None)</span><br><span class="line">	</span><br><span class="line">	delete_cookie(key)  删除cookie  </span><br><span class="line">		注意: 如果删除一个不存在的key,就当什么都没有发生</span><br><span class="line">	</span><br><span class="line">	子类HttpResponseRedirect</span><br><span class="line">		功能，重定向 ，服务器端跳转。</span><br><span class="line">		简写： </span><br><span class="line">		</span><br><span class="line">	子类JsonResponse</span><br><span class="line">		返回json数据，一般用于异步请求</span><br></pre></td></tr></table></figure>

<p><strong>状态保持</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">http协议是无状态的，每次请求都是一次新的请求。不记得以前的请求</span><br><span class="line">客户端与服务端的一次通信就是一次会话</span><br><span class="line">实现状态保持，在客户端或者服务端存储有关会话的数据</span><br><span class="line"></span><br><span class="line">存储方式</span><br><span class="line">	cookie</span><br><span class="line">		所有的数据存储在客户端，不要存敏感的数据</span><br><span class="line">	</span><br><span class="line">	seesion</span><br><span class="line">		所有的数据存储在服务端，在客户端用cookie存储在session_id</span><br><span class="line"></span><br><span class="line">状态保持的目的</span><br><span class="line">	在一段时间内跟踪请求者的状态，可以实现跨页面访问当前的请求者的数据</span><br><span class="line">	注意: 不同的请求者之间不会共享这个数据，与请求一一对应的。</span><br><span class="line"></span><br><span class="line">启用seesion</span><br><span class="line">	settings文件中。  </span><br><span class="line">		INSTALLED_APPS</span><br><span class="line">			 &#39;django.contrib.sessions&#39;, 默认是启用的</span><br><span class="line">		MIDDLEWARE</span><br><span class="line">			&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;,默认是启用的。</span><br><span class="line">		</span><br><span class="line">使用session</span><br><span class="line">	启用session后，每个HttpRequest对象都有一个session属性，就是一个类似字典的</span><br><span class="line">	get(key,default&#x3D;None) 根据键获取session值。</span><br><span class="line">	clear() 清空所有的会话</span><br><span class="line">	flush() 删除当前的会话并删除会话的cookie</span><br><span class="line">	</span><br><span class="line">设置过期时间</span><br><span class="line">	set_expity(value)</span><br><span class="line">	如果不设置，两个星期过期 </span><br><span class="line">	request.session.get_expiry(10) #表示10秒后过期</span><br><span class="line">	时间对象</span><br><span class="line">	0 关闭浏览器时失效。</span><br><span class="line">	None 永不过期。  </span><br><span class="line"></span><br><span class="line">存储session的位置</span><br><span class="line">	数据库: 默认存储在数据库中  django_session;</span><br><span class="line">		SESSION_ENGINE&#x3D;&#39;django.contrib.session.backends.&#39;</span><br><span class="line">	缓存: 只存储在本地内存中，如果丢失不能找回，比数据库快</span><br><span class="line">		SESSION_ENGINE&#x3D;&#39;django.contrib.session.backends.cache&#39;</span><br><span class="line">    数据库和缓存: 	优先从本地存储中读取，读取不到再去数据库中获取。</span><br><span class="line">    	SESSION_ENGINE&#x3D;&#39;django.contrib.session.backends.cached_db&#39;</span><br><span class="line">    </span><br><span class="line">使用redis缓存session     </span><br><span class="line">  pip install django-redis-sessions</span><br><span class="line">  </span><br><span class="line"> SESSION_ENGINE&#x3D;&#39;redis_sessions.session&#39;</span><br><span class="line"> SESSION_REDIS_HOST&#x3D;&#39;localhost&#39;</span><br><span class="line"> SESSION_REDIS_PORT&#x3D;6379</span><br><span class="line"> SESSION_REDIS_DB&#x3D;0</span><br><span class="line"> SESSION_REDIS_PASSWORD&#x3D;&#39;123.yichen&#39;</span><br><span class="line"> SESSION_REDIS_PREFIX&#x3D;&#39;session&#39;</span><br></pre></td></tr></table></figure>







<h1 id="四、Django中的模板"><a href="#四、Django中的模板" class="headerlink" title="四、Django中的模板"></a>四、Django中的模板</h1><p>templates</p>
<h2 id="1-定义模板"><a href="#1-定义模板" class="headerlink" title="1,定义模板"></a><strong>1,定义模板</strong></h2><h3 id="1，变量"><a href="#1，变量" class="headerlink" title="1，变量"></a>1，变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">变量</span><br><span class="line">	视图传递给模板的数据</span><br><span class="line">	要遵循标识符规则</span><br><span class="line">	语法  &#123;&#123;var&#125;&#125;</span><br><span class="line">	注意:如果使用的变量不存在，则插入的是空字符串。</span><br><span class="line">	在模板使用点语法</span><br><span class="line">		字典查询  属性或者方法  数字索引</span><br><span class="line">	在模板中调用对象的方法。</span><br><span class="line">		注意: 在模板中不能传递参数。</span><br></pre></td></tr></table></figure>
<h3 id="2-标签"><a href="#2-标签" class="headerlink" title="2,标签"></a>2,标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">标签</span><br><span class="line">	语法: &#123;%tag%&#125;</span><br><span class="line">	作用: 在输出中创建文本  控制逻辑和循环  </span><br><span class="line">	if: 格式 &#123;% if 表达式 %&#125;</span><br><span class="line">		语句</span><br><span class="line">		&#123;%endif %&#125;</span><br><span class="line">		&#123;%if 表达式1%&#125;</span><br><span class="line">		语句1</span><br><span class="line">        &#123;%else%&#125;</span><br><span class="line">        语句2</span><br><span class="line">        &#123;%endif%&#125;</span><br><span class="line">        </span><br><span class="line">        &#123;%if 表达式1%&#125;</span><br><span class="line">		语句1</span><br><span class="line">        &#123;%elif 表达式2%&#125;</span><br><span class="line">        语句2</span><br><span class="line">        &#123;%elif 表达式n %&#125;</span><br><span class="line">        语句n</span><br><span class="line">        &#123;%else%&#125;</span><br><span class="line">        语句e</span><br><span class="line">        &#123;%endif%&#125;</span><br><span class="line">       示例</span><br><span class="line">       	&#123;%if num %&#125;</span><br><span class="line">       	&lt;h1&gt;yichen is a good man&lt;&#x2F;h1&gt;</span><br><span class="line">       	&#123;%endif%&#125;</span><br><span class="line">	</span><br><span class="line">	for:</span><br><span class="line">		格式 &#123;%for 变量 in 列表%&#125;</span><br><span class="line">		语句</span><br><span class="line">		&#123;% endfor%&#125;</span><br><span class="line">		</span><br><span class="line">		格式2 &#123;%for 变量 in 列表%&#125;</span><br><span class="line">		语句1</span><br><span class="line">		&#123;% empty%&#125;</span><br><span class="line">		语句2</span><br><span class="line">		&#123;% endfor%&#125;  注意: 列表为空或者不存在时执行语句2</span><br><span class="line">		</span><br><span class="line">		&#123;&#123;forloop.counter&#125;&#125; ,表示当前是第几次循环。</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	comment: 注释多行</span><br><span class="line">			&#123;%comment%&#125;</span><br><span class="line">			注释的内容</span><br><span class="line">			&#123;%endcomment%&#125;</span><br><span class="line">			</span><br><span class="line">	</span><br><span class="line">	ifequal、ifnotequal: 判断是否相等或者不相等</span><br><span class="line">		格式:  &#123;%ifequal 值1 值2 %&#125;</span><br><span class="line">				语句 如果值相等，则执行里面的内容</span><br><span class="line">				&#123;% endifequal%&#125;</span><br><span class="line">				</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	include:  作用  加载模板并以标签内的参数渲染</span><br><span class="line">			格式: &#123;% include 模板目录 参数1  参数2 %&#125;</span><br><span class="line">	</span><br><span class="line">	url:  作用: 反向解析</span><br><span class="line">			格式: &#123;%url &#39;namespace:name&#39; p1 p2%&#125;</span><br><span class="line">			</span><br><span class="line">	</span><br><span class="line">	csrf_token: 作用:</span><br><span class="line">    				用于跨站请求伪造保护</span><br><span class="line">    				</span><br><span class="line">    			</span><br><span class="line">				格式:&#123;% csrf_token%&#125;</span><br><span class="line">	</span><br><span class="line">	block、extends: 作用 用于模板的继承</span><br><span class="line">	</span><br><span class="line">	autoescape:  作用  用于HTML转义</span><br></pre></td></tr></table></figure>
<h3 id="3-过滤器"><a href="#3-过滤器" class="headerlink" title="3,过滤器"></a>3,过滤器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">过滤器 </span><br><span class="line">	语法 &#123;&#123;var|过滤器&#125;&#125;</span><br><span class="line">	作用， 在变量被显示之前修改它。</span><br><span class="line">	lower 	小写</span><br><span class="line">	upper	大写</span><br><span class="line">	过滤器可以传递参数，参数用引号引起来 join </span><br><span class="line">	格式      列表|join:&#39;#&#39;</span><br><span class="line">	示例  &lt;h1&gt;&#123;&#123;list|join:&#39;#&#39;&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">	如果一个变量没有被提供，或者值为false,空、可以使用默认值</span><br><span class="line">	default </span><br><span class="line">	格式 &#123;&#123;var|default:&#39;good&#39;&#125;&#125;</span><br><span class="line">	示例  &lt;h1&gt;&#123;&#123;test|default:&#39;没有&#39;&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">	</span><br><span class="line">	根据给定格式转换日期为字符串</span><br><span class="line">	date</span><br><span class="line">		格式: &#123;&#123;dateval|date:&#39;y-m-d&#39;&#125;&#125;</span><br><span class="line">		</span><br><span class="line">	HTML转义   escape</span><br><span class="line">	</span><br><span class="line">	加减乘除  </span><br><span class="line">	示例:</span><br><span class="line">&lt;h1&gt;num &#x3D;&#123;&#123;num&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;num|add:10&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;num|add:-5&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--num&#x2F;1*5--&gt;</span><br><span class="line">&lt;!--num * 5--&gt;</span><br><span class="line">&lt;h1&gt;&#123;% widthratio num 1 5 %&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;!--num &#x2F;5 --&gt;</span><br><span class="line">&lt;h1&gt;&#123;% widthratio num 5 1 %&#125;&lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-注释"><a href="#4-注释" class="headerlink" title="4,注释"></a>4,注释</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">注释 </span><br><span class="line">	单行注释 </span><br><span class="line">		语法 &#123;# 注释内容 #&#125;</span><br><span class="line">		</span><br><span class="line">	多行注释</span><br><span class="line">	comment: 注释多行</span><br><span class="line">			&#123;%comment%&#125;</span><br><span class="line">			注释的内容</span><br><span class="line">			&#123;%endcomment%&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5，反向解析"><a href="#5，反向解析" class="headerlink" title="5，反向解析"></a><strong>5，反向解析</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">url:  作用: 反向解析</span><br><span class="line">			格式: &#123;%url &#39;namespace:name&#39; p1 p2%&#125;</span><br><span class="line"></span><br><span class="line">project\urls.py文件</span><br><span class="line">url(r&#39;^&#39;,include(&#39;myApp.urls&#39;,namespace&#x3D;&#39;app&#39;))</span><br><span class="line"></span><br><span class="line">project\myApp\urls.py 文件</span><br><span class="line">url(r&#39;^good&#x2F;(\d+)&#x2F;$&#39;, views.good,name&#x3D;&quot;good&quot;),</span><br><span class="line"></span><br><span class="line">index.html代码文件</span><br><span class="line">&lt;a href&#x3D;&quot;&#123;% url &#39;app:good&#39; 1 %&#125;&quot;&gt;链接&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-模板继承"><a href="#6-模板继承" class="headerlink" title="6,模板继承"></a>6,模板继承</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">作用 </span><br><span class="line">	模板继承可以减少页面的内容的重复定义，实现页面的重用</span><br><span class="line">	</span><br><span class="line">block标签</span><br><span class="line">	在父模板中预留区域，子模板去填充</span><br><span class="line">	语法:</span><br><span class="line">		&#123;% block 标签名 %&#125;</span><br><span class="line">		&#123;% endblock 标签名 %&#125;</span><br><span class="line"></span><br><span class="line">extends标签</span><br><span class="line">	继承模板，需要写在模板文件的第一行</span><br><span class="line">	语法: </span><br><span class="line">		&#123;% extends &#39;父模板路径&#39; %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7，HTML转义"><a href="#7，HTML转义" class="headerlink" title="7，HTML转义"></a>7，HTML转义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;&#123;code&#125;&#125;</span><br><span class="line">将接收到的code当成普通字符串渲染</span><br><span class="line"></span><br><span class="line">将接收到的字符串当成HTML代码渲染</span><br><span class="line">&#123;% autoescape off %&#125; on 就是当成普通字符串了</span><br><span class="line">&#123;&#123;code&#125;&#125;</span><br><span class="line">&#123;% endautoescape %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8，CSRF"><a href="#8，CSRF" class="headerlink" title="8，CSRF"></a>8，CSRF</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">跨站请求伪造 </span><br><span class="line">	某些恶意网站包含链接、表单、按钮、js，利用登录用户在浏览器中认证，从而攻击服务。</span><br><span class="line">	</span><br><span class="line">防止CSRF</span><br><span class="line">	1、在settings.py文件中的MIDDLEWARE增加&#39;django.middleware.csrf.CsrfViewMiddleware&#39;,</span><br><span class="line">	2、&#123;% csrf_token %&#125;  在html代码中加上验证。</span><br></pre></td></tr></table></figure>

<h3 id="9，验证码"><a href="#9，验证码" class="headerlink" title="9，验证码"></a>9，验证码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">作用: 在用户注册、登陆页面的时候使用，为了防止暴力请求，减轻服务器的压力。</span><br><span class="line">防止csrf一种方式</span><br><span class="line"></span><br><span class="line">pip install Pillow</span><br></pre></td></tr></table></figure>



<h1 id="五，Django高级扩展"><a href="#五，Django高级扩展" class="headerlink" title="五，Django高级扩展"></a>五，Django高级扩展</h1><h2 id="1-静态文件"><a href="#1-静态文件" class="headerlink" title="1,静态文件"></a>1,静态文件</h2><p>css、js、图片、json文件、字体文件等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">配置 settings.py</span><br><span class="line"></span><br><span class="line">STATICFILES_DIRS&#x3D;[</span><br><span class="line">os.path.join(BASE_DIR,&#39;static&#39;)</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="2，中间件"><a href="#2，中间件" class="headerlink" title="2，中间件"></a>2，中间件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">一个轻量级、底层插件。可以介入Django的请求和响应</span><br><span class="line">本质   一个Python类</span><br><span class="line"></span><br><span class="line">方法:</span><br><span class="line">__init__  不需要传参数，服务器响应第一个请求的时候自动调用，用于确定是否启用该中间件</span><br><span class="line"></span><br><span class="line">执行的位置</span><br><span class="line"></span><br><span class="line">自定义中间件</span><br></pre></td></tr></table></figure>

<h2 id="3，上传图片"><a href="#3，上传图片" class="headerlink" title="3，上传图片"></a>3，上传图片</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">概述:</span><br><span class="line"> 文件上传时，文件数据存储在request.FILES属性中。</span><br><span class="line">   注意: form表单要上传文件是需要加enctype&#x3D;&#39;multipart&#x2F;form-data&#39;</span><br><span class="line">   注意: 上传文件必须是post请求。</span><br><span class="line">存储路径</span><br><span class="line">	在static目录下创建upfile目录用于存储文件</span><br><span class="line">	配置settings.py文件</span><br><span class="line">	MDEIA_ROOT&#x3D;os.path.join(BASE_DIR,r&#39;static\upfile&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="4，分页"><a href="#4，分页" class="headerlink" title="4，分页"></a>4，分页</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>











</div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://yc6.cool/2020/08/04/python之Django/">python3之Django</a></li><li><strong>本文作者：</strong><a href="https://yc6.cool">yichen</a></li><li><strong>本文链接：</strong><a href="https://yc6.cool/2020/08/04/python之Django/">https://yc6.cool/2020/08/04/python之Django/</a></li><li><strong>版权声明：</strong><span>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</span></li></ul><div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2023/11/01/selenlium%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0dns%E5%9F%9F%E5%90%8D/" target="_blank">批量添加dns域名解析</a><br></span><span>  2.<a class="is-size-6" href="/2023/11/01/python%E4%B9%8BSelenium%E6%A8%A1%E5%9D%97/" target="_blank">python之Selenium模块的使用</a><br></span><span>  3.<a class="is-size-6" href="/2021/07/23/%E5%88%A9%E7%94%A8python%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E6%8B%86%E5%88%86/" target="_blank">利用Python实现文件拆分</a><br></span><span>  4.<a class="is-size-6" href="/2020/08/04/%E5%A4%9A%E4%BB%BB%E5%8A%A1%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B/" target="_blank">python3多任务进程线程</a><br></span><span>  5.<a class="is-size-6" href="/2020/08/04/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" target="_blank">python3网络编程</a><br></span><span>  6.<a class="is-size-6" href="/2020/08/04/%E7%88%AC%E8%99%AB/" target="_blank">python3爬虫</a><br></span><span>  7.<a class="is-size-6" href="/2020/08/04/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" target="_blank">python3正则表达式</a><br></span><span>  8.<a class="is-size-6" href="/2020/08/04/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%8E%B7%E5%8F%96%E5%90%84%E7%A7%8D%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9/" target="_blank">python3自动化获取各种文件内容</a><br></span></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/2020/08/04/docker%E4%BD%BF%E7%94%A8/" target="_blank">docker的使用</a><br></span><span>  2.<a class="is-size-6" href="/2020/08/03/mysql%E5%9F%BA%E7%A1%80/" target="_blank">mysql基础</a><br></span><span>  3.<a class="is-size-6" href="/2020/08/03/nginx%E5%9F%BA%E7%A1%80/" target="_blank">nginx基础</a><br></span><span>  4.<a class="is-size-6" href="/2020/08/04/python3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%87%8D%E7%82%B9/" target="_blank">python3基础知识重点</a><br></span><span>  5.<a class="is-size-6" href="/2023/05/07/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/" target="_blank">Prometheus监控linux</a><br></span><span>  6.<a class="is-size-6" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1%E6%8E%A5%E6%94%B6%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/" target="_blank">Prometheus使用邮件接收告警通知</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://yichenxiu.com/tupian/tubiao/alipay1.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://i.328888.xyz/2023/03/05/dZXCk.jpeg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/08/04/html%E5%92%8Ccss%E5%9F%BA%E7%A1%80/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">html和css基础</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/04/%E5%A4%9A%E4%BB%BB%E5%8A%A1%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B/"><span class="level-item">python3多任务进程线程</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: '0aea0a39a8ea64777683e6402e39acc7',
            repo: 'issue_database',
            owner: 'zhi666',
            clientID: '1b861f81e9a79ee6028d',
            clientSecret: 'cc629aff090aa9c60d5e13ddf7fcfce14f00a478',
            admin: ["zhi666"],
            createIssueManually: true,
            distractionFreeMode: true,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget toc-scroll" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-一-Django基础" href="#一-Django基础"><span>一,Django基础</span></a><ul class="menu-list toc"><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-安装" href="#1-安装"><span>1.安装</span></a></li><li><a class="is-flex toc-item" id="toc-item-2，创建项目" href="#2，创建项目"><span>2，创建项目</span></a></li><li><a class="is-flex toc-item" id="toc-item-3，Django基本操作" href="#3，Django基本操作"><span>3，Django基本操作</span></a></li><li><a class="is-flex toc-item" id="toc-item-1、设计表结构" href="#1、设计表结构"><span>1、设计表结构</span></a></li><li><a class="is-flex toc-item" id="toc-item-2、配置数据库" href="#2、配置数据库"><span>2、配置数据库</span></a></li><li><a class="is-flex toc-item" id="toc-item-3，激活应用" href="#3，激活应用"><span>3，激活应用</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-Django视图的基本使用" href="#3-Django视图的基本使用"><span>3,Django视图的基本使用</span></a></li><li><a class="is-flex toc-item" id="toc-item-4，模板的基本使用" href="#4，模板的基本使用"><span>4，模板的基本使用</span></a></li></ul></ul></li><li><a class="is-flex toc-item" id="toc-item-二，Django模型" href="#二，Django模型"><span>二，Django模型</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1，Django模型流程" href="#1，Django模型流程"><span>1，Django模型流程</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1，配置数据库" href="#1，配置数据库"><span>1，配置数据库</span></a></li><li><a class="is-flex toc-item" id="toc-item-2，开发流程" href="#2，开发流程"><span>2，开发流程</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-ORM" href="#3-ORM"><span>3,ORM</span></a></li><li><a class="is-flex toc-item" id="toc-item-模型查询" href="#模型查询"><span>模型查询</span></a></li></ul></li></ul></li><li><a class="is-flex toc-item" id="toc-item-三、Django视图基础" href="#三、Django视图基础"><span>三、Django视图基础</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1、url配置" href="#1、url配置"><span>1、url配置</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-url的反向解析" href="#1-url的反向解析"><span>1.url的反向解析</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-2，视图函数" href="#2，视图函数"><span>2，视图函数</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-3，HttpRequest对象" href="#3，HttpRequest对象"><span>3，HttpRequest对象</span></a></li></ul></li></ul></li><li><a class="is-flex toc-item" id="toc-item-四、Django中的模板" href="#四、Django中的模板"><span>四、Django中的模板</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-定义模板" href="#1-定义模板"><span>1,定义模板</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1，变量" href="#1，变量"><span>1，变量</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-标签" href="#2-标签"><span>2,标签</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-过滤器" href="#3-过滤器"><span>3,过滤器</span></a></li><li><a class="is-flex toc-item" id="toc-item-4-注释" href="#4-注释"><span>4,注释</span></a></li><li><a class="is-flex toc-item" id="toc-item-5，反向解析" href="#5，反向解析"><span>5，反向解析</span></a></li><li><a class="is-flex toc-item" id="toc-item-6-模板继承" href="#6-模板继承"><span>6,模板继承</span></a></li><li><a class="is-flex toc-item" id="toc-item-7，HTML转义" href="#7，HTML转义"><span>7，HTML转义</span></a></li><li><a class="is-flex toc-item" id="toc-item-8，CSRF" href="#8，CSRF"><span>8，CSRF</span></a></li><li><a class="is-flex toc-item" id="toc-item-9，验证码" href="#9，验证码"><span>9，验证码</span></a></li></ul></li></ul></li><li><a class="is-flex toc-item" id="toc-item-五，Django高级扩展" href="#五，Django高级扩展"><span>五，Django高级扩展</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-静态文件" href="#1-静态文件"><span>1,静态文件</span></a></li><li><a class="is-flex toc-item" id="toc-item-2，中间件" href="#2，中间件"><span>2，中间件</span></a></li><li><a class="is-flex toc-item" id="toc-item-3，上传图片" href="#3，上传图片"><span>3，上传图片</span></a></li><li><a class="is-flex toc-item" id="toc-item-4，分页" href="#4，分页"><span>4，分页</span></a></li></ul></li></ul></div></div><script type="text/javascript" async>
        $(document).ready(function () { //参考自 https://github.com/ppoffice/hexo-theme-icarus/pull/616/files
            var observerTopMargin;
            var scrollObserver;
            var headerElems = $(".headerlink");
            var activeTocItem;
        
            function initIntersectionObserver(docHeight) {
                observerTopMargin = docHeight;
                scrollObserver = new IntersectionObserver(scrollCallBack,
                    {
                        root: null,  // viewpoint
                        rootMargin: docHeight + "px 0px -80% 0px"  // cover top 30% of viewport to the top of document
                    })
            }
        
            function scrollCallBack(entries, observer) {
                if ($(window).scrollTop() > observerTopMargin * 0.7) { 
                    // User somehow scroll to 70% of observerTopMargin (which is inited as 200% document height)
                    // Observer top margin need to extend to cover all the space to the top of the document
                    initIntersectionObserver(observerTopMargin * 2)
                    observer.disconnect();
                    return;
                }
                let toActive;
                if (entries[0].intersectionRatio == 1) {  // enter viewed area
                    let entry = entries.reduce((u, v) => (u.target.toc_id > v.target.toc_id ? u : v));  // get the lowest item
                    toActive = $("#toc-item-" + $(entry.target).attr("href").substr(1));
                } else {
                    let entry = entries.reduce((u, v) => (u.target.toc_id < v.target.toc_id ? u : v));  // get the highest item
                    let idx = Math.max(entry.target.toc_id - 1, 0);
                    toActive = $("#toc-item-" + $(headerElems[idx]).attr("href").substr(1));
                }
                if (activeTocItem) activeTocItem.removeClass("is-current");
                activeTocItem = toActive
                activeTocItem.addClass("is-current");
            }
        
            initIntersectionObserver($(document).height() * 2);
            headerElems.each(function (index, obj) {
                obj.toc_id = index;
                scrollObserver.observe(obj);
            })
        });</script></div><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/toudong.jpg" alt="逸尘秀"></figure><p class="title is-size-4 is-block line-height-inherit">逸尘秀</p><p class="is-size-6 is-block">只此一生 ， 必须快乐 ！</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>深圳</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">136</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">55</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://weibo.com/u/6155656382" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/zhi666"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/u/6155656382"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:1378373724@qq.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Next" href="https://zhi666.github.io/remove.io"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2023-11-01T02:25:44.578Z">2023-11-01</time></p><p class="title is-6"><a class="link-muted" href="/2023/11/01/selenlium%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0dns%E5%9F%9F%E5%90%8D/">批量添加dns域名解析</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/python/">python</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-17T01:45:36.000Z">2023-05-17</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/17/Kubernetes%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2/">Kubernetes高可用集群二进制部署</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux3/">linux3</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-10T06:25:36.000Z">2023-05-10</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E6%89%8B%E6%9C%BA%E7%94%B5%E8%AF%9D_%E7%9F%AD%E4%BF%A1%E6%8E%A5%E6%94%B6%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/">Prometheus使用手机电话_短信接收告警通知</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux2/">linux2</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-10T06:22:36.000Z">2023-05-10</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A5%E6%94%B6%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/">Prometheus使用企业微信接收告警通知</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux2/">linux2</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-10T06:20:36.000Z">2023-05-10</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E4%BC%81%E4%B8%9A%E9%92%89%E9%92%89%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/">Prometheus使用企业钉钉接收告警通知</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux2/">linux2</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/English/"><span class="level-start"><span class="level-item">English</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/HTML/"><span class="level-start"><span class="level-item">HTML</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JS/"><span class="level-start"><span class="level-item">JS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/html/"><span class="level-start"><span class="level-item">html</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux1/"><span class="level-start"><span class="level-item">linux1</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux2/"><span class="level-start"><span class="level-item">linux2</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux3/"><span class="level-start"><span class="level-item">linux3</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/web/"><span class="level-start"><span class="level-item">web</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/work/"><span class="level-start"><span class="level-item">work</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/05/"><span class="level-start"><span class="level-item">五月 2023</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/04/"><span class="level-start"><span class="level-item">四月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag is-grey-lightest">18</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%B9%E5%99%A8/"><span class="tag">容器</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">数据库</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"><span class="tag">科学上网</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"><span class="tag">自动化</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E4%BD%9C/"><span class="tag">工作</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tag">工具</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssl/"><span class="tag">ssl</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><span class="tag">文件系统</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%BF%97/"><span class="tag">日志</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%BF%97%E5%8A%A0%E5%AF%86/"><span class="tag">日志加密</span><span class="tag is-grey-lightest">3</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=zhi666FeedsId&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="zhi666FeedsId" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div><p class="help">输入邮箱开始订阅，更博后邮件通知！</p></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="逸尘秀" height="28"></a><p class="size-small"><span>&copy; 2023 yichen</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>,Modify by <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">removeif</a> <br><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2020/08/02 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhi666"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://yc6.cool',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.12/js/lightgallery-all.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><!--!--><!--!--><!--!--><script src="/js/toc.js" defer></script><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('1b861f81e9a79ee6028d','cc629aff090aa9c60d5e13ddf7fcfce14f00a478','zhi666','issue_database',false);})</script><link rel="stylesheet" href="/css/insight.css"><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>(function (window) {
            var INSIGHT_CONFIG = {
                TRANSLATION: {
                    POSTS: '文章',
                    PAGES: '页面',
                    CATEGORIES: '分类',
                    TAGS: '标签',
                    UNTITLED: '(无标题)',
                },
                CONTENT_URL: '/content.json',
            };
            window.INSIGHT_CONFIG = INSIGHT_CONFIG;
        })(window);</script><script src="/js/insight.js" defer></script></body></html>