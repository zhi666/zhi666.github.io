<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><meta name="keywords" content="[object Object]"><meta name="description" content="docker 命令大全"><meta name="author" content="zhi666"><title>docker命令大全 - 逸尘秀</title><meta description="docker 命令大全"><meta property="og:type" content="article"><meta property="og:title" content="docker命令大全"><meta property="og:url" content="https://yc6.cool/2020/08/04/docker_%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"><meta property="og:site_name" content="逸尘秀"><meta property="og:description" content="docker 命令大全"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-08-04T03:02:36.000Z"><meta property="article:modified_time" content="2023-11-01T02:25:44.553Z"><meta property="article:author" content="zhi666"><meta property="article:tag" content="docker"><meta property="article:tag" content="容器"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://yc6.cool/img/avatar.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yc6.cool/2020/08/04/docker_%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"},"headline":"docker命令大全","image":["https://yc6.cool/img/avatar.png"],"datePublished":"2020-08-04T03:02:36.000Z","dateModified":"2023-11-01T02:25:44.553Z","author":{"@type":"Person","name":"zhi666"},"description":"docker 命令大全"}</script><link rel="alternative" href="/atom.xml" title="逸尘秀" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.12/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="逸尘秀" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">影音</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/self-talking">碎碎念</a><a class="navbar-item" href="/message">留言</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhi666"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2020-08-04  <a class="commentCountImg" href="/2020/08/04/docker_%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/#comment-container"><span class="display-none-class">7df320a47cfd83c953eff12f56a74bc5</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="7df320a47cfd83c953eff12f56a74bc5">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>36 分钟  <i class="fas fa-pencil-alt"> </i>5.4 k</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">docker命令大全</h1><div class="content"><h1 id="docker-命令大全"><a href="#docker-命令大全" class="headerlink" title="docker 命令大全"></a>docker 命令大全</h1><a id="more"></a>
<h3 id="1-镜像仓库"><a href="#1-镜像仓库" class="headerlink" title="1. 镜像仓库"></a>1. 镜像仓库</h3><p>1.1 <code>docker search [OPTIONS] TERM // 搜索镜像</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">选项:</span><br><span class="line">	-f  --filter   filter  都可以</span><br><span class="line">说明:</span><br><span class="line">	根据条件筛选</span><br><span class="line">示例:</span><br><span class="line">--filter&#x3D;is-automated&#x3D;true  只列出 automated build类型的镜像</span><br><span class="line">--filter&#x3D;stars&#x3D;10 列出收藏数不小于指定值的镜像</span><br><span class="line">	</span><br><span class="line">选项: --limit int  设置搜索结果的记录数量</span><br><span class="line">	--no-trunc 	   搜索结果完整显示</span><br></pre></td></tr></table></figure>



<p>1.2 <code>docker pull [OPTIONS] NAME[:TAG|@DIGEST] // 从镜像参数中拉取指定镜像</code></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a</code></td>
<td>拉取所有tagged镜像</td>
<td></td>
</tr>
<tr>
<td><code>--disable-content-trust</code></td>
<td>忽略镜像的校验,默认为true</td>
<td></td>
</tr>
</tbody></table>
<p>1.3 <code>docker push [OPTIONS] NAME[:TAG] // 上传镜像到仓库(要先登录仓库)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">选项</span><br><span class="line">--disable-content-trust</span><br><span class="line">说明:</span><br><span class="line">	忽略镜像校验</span><br><span class="line">示例:</span><br><span class="line">	docker login </span><br><span class="line">	docker tag local-image:tagname yichen&#x2F;mysql:tagname </span><br><span class="line">	docker push yichen&#x2F;mysql:tagname</span><br></pre></td></tr></table></figure>

<p>1.4<code>docker login -u 用户名 -p 密码 //登录</code></p>
<p>1.5 <code>docker logout // 登出</code></p>
<h3 id="2-容器操作"><a href="#2-容器操作" class="headerlink" title="2. 容器操作"></a>2. 容器操作</h3><h4 id="2-1-docker-ps-OPTIONS-列出容器"><a href="#2-1-docker-ps-OPTIONS-列出容器" class="headerlink" title="2.1 docker ps [OPTIONS] //列出容器"></a>2.1 <code>docker ps [OPTIONS] //列出容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a</code></td>
<td>显示所有容器,默认只显示正在运行的</td>
<td>docker ps -a</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>过滤</td>
<td><code>docker ps -f name=hello</code></td>
</tr>
<tr>
<td><code>-n 10</code></td>
<td>显示最近创建的容器</td>
<td></td>
</tr>
<tr>
<td><code>--no-trunc</code></td>
<td>显示全部描述</td>
<td></td>
</tr>
<tr>
<td><code>-q</code></td>
<td>只显示简略ID</td>
<td></td>
</tr>
<tr>
<td><code>-s</code></td>
<td>显示总的文件大小</td>
<td></td>
</tr>
</tbody></table>
<h4 id="2-2docker-inspect-OPTIONS-NAME-ID-获取容器或镜像的元数据"><a href="#2-2docker-inspect-OPTIONS-NAME-ID-获取容器或镜像的元数据" class="headerlink" title="2.2docker inspect [OPTIONS] NAME|ID //获取容器或镜像的元数据"></a>2.2<code>docker inspect [OPTIONS] NAME|ID //获取容器或镜像的元数据</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-f filter</code></td>
<td>筛选</td>
<td></td>
</tr>
<tr>
<td><code>-s</code></td>
<td>如果是一个容器的话返回其文件大小</td>
<td></td>
</tr>
<tr>
<td><code>--type image/container</code></td>
<td>返回指定类型的JSON</td>
<td></td>
</tr>
</tbody></table>
<h4 id="2-3-docker-top-CONTAINER-查看指定容器中运行的进程"><a href="#2-3-docker-top-CONTAINER-查看指定容器中运行的进程" class="headerlink" title="2.3 docker top CONTAINER // 查看指定容器中运行的进程"></a>2.3 <code>docker top CONTAINER // 查看指定容器中运行的进程</code></h4><h4 id="2-4-docker-attach-OPTIONS-CONTAINER-进入正在运行的容器"><a href="#2-4-docker-attach-OPTIONS-CONTAINER-进入正在运行的容器" class="headerlink" title="2.4 docker attach [OPTIONS] CONTAINER //进入正在运行的容器"></a>2.4 <code>docker attach [OPTIONS] CONTAINER //进入正在运行的容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-detach-keys string</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--no-stdin</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--sig-proxy</code></td>
<td><code>默认为true</code></td>
<td><code>--sig-proxy=false</code></td>
</tr>
</tbody></table>
<h4 id="2-5-docker-events-OPTIONS-从服务器获取实时事件"><a href="#2-5-docker-events-OPTIONS-从服务器获取实时事件" class="headerlink" title="2.5 docker events [OPTIONS] //从服务器获取实时事件"></a>2.5 <code>docker events [OPTIONS] //从服务器获取实时事件</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-f filter</code></td>
<td>过滤</td>
<td></td>
</tr>
<tr>
<td><code>--since timestamp</code></td>
<td><code>显示在指定时间之后发生的事件</code></td>
<td><code>docker events --since=1467302400</code></td>
</tr>
<tr>
<td><code>--until timestamp</code></td>
<td><code>显示在指定时间之前所产生的事件</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="2-6-docker-logs-OPTIONS-CONTAINER-获取容器的日志"><a href="#2-6-docker-logs-OPTIONS-CONTAINER-获取容器的日志" class="headerlink" title="2.6 docker logs [OPTIONS] CONTAINER //获取容器的日志"></a>2.6 <code>docker logs [OPTIONS] CONTAINER //获取容器的日志</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>--details</code></td>
<td><code>显示详细日志</code></td>
<td></td>
</tr>
<tr>
<td><code>-f</code></td>
<td><code>日志实时输出</code></td>
<td></td>
</tr>
<tr>
<td><code>--since timestamp</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--until timestamp</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>--tail num</code></td>
<td><code>输出最后多少行日志</code></td>
<td></td>
</tr>
<tr>
<td><code>-t</code></td>
<td><code>显示日志时间</code></td>
<td></td>
</tr>
</tbody></table>
<p>2.7 <code>docker wait CONTAINER... //等待容器停止并输出其退出代码</code></p>
<p>2.8 <code>docker export -o fileName.tar CONTAINER //将指定容器打包到tar文档中,可以指定文件路径</code></p>
<p>2.9 <code>docker port CONTAINER [PORT] // 列出容器的端口映射(容器端口与主机端口对应关系)</code></p>
<h3 id="3-容器rootfs命令"><a href="#3-容器rootfs命令" class="headerlink" title="3.容器rootfs命令"></a>3.容器rootfs命令</h3><h4 id="3-1-docker-commit-OPTIONS-CONTAINER-REPOSITORY-TAG-从一个容器创建一个新的镜像"><a href="#3-1-docker-commit-OPTIONS-CONTAINER-REPOSITORY-TAG-从一个容器创建一个新的镜像" class="headerlink" title="3.1 docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]] // 从一个容器创建一个新的镜像"></a>3.1 <code>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]] // 从一个容器创建一个新的镜像</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a</code></td>
<td><code>镜像作者</code></td>
<td></td>
</tr>
<tr>
<td><code>-c</code></td>
<td><code>使用Dockerfile指令创建镜像</code></td>
<td></td>
</tr>
<tr>
<td><code>-m</code></td>
<td><code>提交时的说明文字</code></td>
<td></td>
</tr>
<tr>
<td><code>-p</code></td>
<td><code>在提交时,暂停容器</code></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">示例: docker commit ID new_image_name     #镜像打包 (保存对容器的修改)</span><br><span class="line">docker commit -m&#x3D;&quot;提交的描述信息&quot; -a&#x3D;&quot;作者&quot; 容器id  要创建的目标镜像名:[标签名]</span><br></pre></td></tr></table></figure>



<h4 id="3-2-docker-cp-容器与主机之间的文件复制"><a href="#3-2-docker-cp-容器与主机之间的文件复制" class="headerlink" title="3.2 docker cp // 容器与主机之间的文件复制"></a>3.2 <code>docker cp // 容器与主机之间的文件复制</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker cp [options] CONTAINER:SRC_PATH TAR_PATH</span><br><span class="line">从容器中复制到主机</span><br><span class="line">	docker cp testtomcat：&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webapps&#x2F;test&#x2F;js&#x2F;test.js &#x2F;opt </span><br><span class="line">	</span><br><span class="line">docker cp [options] SRC_PATH CONTAINER:TAR_PATH</span><br><span class="line">从主机复制到容器中</span><br><span class="line">	docker cp &#x2F;opt&#x2F;test.js testtomcat：&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webapps&#x2F;test&#x2F;js</span><br><span class="line">选项: </span><br><span class="line">-a  复制所有的gid&#x2F;uid信息</span><br><span class="line">-L   Always follow symbol link in SRC_PATH 始终遵循原路径的符号信息</span><br></pre></td></tr></table></figure>



<p>3.3 <code>docker difff CONTAINER // 查看容器中被修改过的文件或目录</code><br><code>说明:C - Change, D - Delete, A - Add</code></p>
<h3 id="4-容器生命周期管理"><a href="#4-容器生命周期管理" class="headerlink" title="4. 容器生命周期管理"></a>4. 容器生命周期管理</h3><h4 id="4-1-docker-start-options-container-启动一个或多个容器"><a href="#4-1-docker-start-options-container-启动一个或多个容器" class="headerlink" title="4.1 docker start [options] container... //启动一个或多个容器"></a>4.1 <code>docker start [options] container... //启动一个或多个容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a</code></td>
<td><code>启动后进入容器</code></td>
<td></td>
</tr>
<tr>
<td><code>--detach-keys string</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>-i</code></td>
<td><code>Attach container&#39;s STDIN</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="4-2-docker-stop-options-container-停止一个或多个容器"><a href="#4-2-docker-stop-options-container-停止一个或多个容器" class="headerlink" title="4.2 docker stop [options] container... //停止一个或多个容器"></a>4.2 <code>docker stop [options] container... //停止一个或多个容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-t int</code></td>
<td><code>多少秒后停止容器</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="4-3-docker-restart-options-container-重启一个或多个容器"><a href="#4-3-docker-restart-options-container-重启一个或多个容器" class="headerlink" title="4.3 docker restart [options] container... //重启一个或多个容器"></a>4.3 <code>docker restart [options] container... //重启一个或多个容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-t int</code></td>
<td><code>多少秒后重启容器</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="4-4-docker-kill-options-container-杀死一个或多个容器"><a href="#4-4-docker-kill-options-container-杀死一个或多个容器" class="headerlink" title="4.4 docker kill [options] container... // 杀死一个或多个容器"></a>4.4 <code>docker kill [options] container... // 杀死一个或多个容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-s string</code></td>
<td><code>给容器发送一个信号,默认为KILL</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="4-5-docker-rm-options-container-删除一个或多个容器"><a href="#4-5-docker-rm-options-container-删除一个或多个容器" class="headerlink" title="4.5 docker rm [options] container... //删除一个或多个容器"></a>4.5 <code>docker rm [options] container... //删除一个或多个容器</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-f, -force</code></td>
<td><code>强制移除容器</code></td>
<td></td>
</tr>
<tr>
<td><code>-l, -link</code></td>
<td><code>删除指定的连接</code></td>
<td></td>
</tr>
<tr>
<td><code>-v, -volumes</code></td>
<td><code>删除容器及其挂载的卷</code></td>
<td></td>
</tr>
</tbody></table>
<p>4.6 <code>docker pause container... // 暂停容器中所有的进程</code></p>
<p>4.7 <code>docker unpause container... // 恢复容器中所有的进程</code></p>
<h4 id="4-8-docker-exec-options-container-command-arg-在运行的容器中执行命令"><a href="#4-8-docker-exec-options-container-command-arg-在运行的容器中执行命令" class="headerlink" title="4.8 docker exec [options] container command [arg...] 在运行的容器中执行命令"></a>4.8 <code>docker exec [options] container command [arg...] 在运行的容器中执行命令</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 77cd6bef4dc9 &#x2F;bin&#x2F;bash   #进容器</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-d, --detach</code></td>
<td><code>分离模式, 在后台运行</code></td>
<td></td>
</tr>
<tr>
<td><code>--detach-keys str</code></td>
<td>``</td>
<td></td>
</tr>
<tr>
<td><code>-e, --env list</code></td>
<td><code>设置环境变量</code></td>
<td></td>
</tr>
<tr>
<td><code>-i, --interactive</code></td>
<td><code>保持STDIN打开</code></td>
<td><code>与-t结合使用打开一个终端</code></td>
</tr>
<tr>
<td><code>-t, --tty</code></td>
<td><code>分配一个伪终端</code></td>
<td><code>与-i结合使用打开一个终端</code></td>
</tr>
<tr>
<td><code>--privileged</code></td>
<td>授予命令扩展权限</td>
<td></td>
</tr>
<tr>
<td><code>-u, --user str</code></td>
<td><code>指定用户名或用户ID</code></td>
<td></td>
</tr>
<tr>
<td><code>-w, --workdir str</code></td>
<td><code>在指定文件目录下执行相应的命令</code></td>
<td><code>-w /home container ls</code></td>
</tr>
<tr>
<td><code>-c</code></td>
<td><code>执行docker容器命令</code></td>
<td><code>docker exec -it zeppelin bash -c &#39;echo $ZEPPELIN_HOME&#39;</code></td>
</tr>
</tbody></table>
<h4 id="4-9-docker-run-optoins-image-command-arg-运行一个新容器中执行一个命令"><a href="#4-9-docker-run-optoins-image-command-arg-运行一个新容器中执行一个命令" class="headerlink" title="4.9 docker run [optoins] image [command] [arg...] // 运行一个新容器中执行一个命令"></a>4.9 <code>docker run [optoins] image [command] [arg...] // 运行一个新容器中执行一个命令</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">运行容器</span><br><span class="line"></span><br><span class="line">docker run --name 容器名 -d -p 3306:3306 mysql  docker 启动容器</span><br><span class="line">docker run image_name</span><br><span class="line">docker run -d -p 80:80 nginx:latest</span><br><span class="line">run（创建并运行一个容器） </span><br><span class="line">-d 放在后台 </span><br><span class="line">-p 端口映射 :docker的容器端口</span><br><span class="line">-P 随机分配端口</span><br><span class="line">-v 源地址(宿主机):目标地址(容器)</span><br><span class="line"></span><br><span class="line">docker run -it --name centos6 centos:6.9 &#x2F;bin&#x2F;bash </span><br><span class="line">-it 分配交互式的终端 </span><br><span class="line">--name 指定容器的名字 </span><br><span class="line">&#x2F;bin&#x2F;sh覆盖容器的初始命令</span><br></pre></td></tr></table></figure>

<h4 id="4-9-1-选项有90个"><a href="#4-9-1-选项有90个" class="headerlink" title="4.9.1 选项有90个"></a>4.9.1 选项有90个</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br></pre></td><td class="code"><pre><span class="line">选项:</span><br><span class="line">1. --add-host list</span><br><span class="line">	说明: 添加自定义的host-ip映射(host:ip)</span><br><span class="line">	示例:</span><br><span class="line">	</span><br><span class="line">2. -a , --attach list</span><br><span class="line">	说明: 将容器的stdin,stdout,stderr【标准输入，标准输出，错误输出】关联到本地shell中，在执行docker run时，将所有输入输出指定到本地shell中，若执行时携带此参数，可以指定将stdin,stdout,stderr的某一个或某几个关联到本地shell</span><br><span class="line"></span><br><span class="line">3. --blkio-weight uint16 </span><br><span class="line">	说明: 限制容器读写权重，当宿主机有1个以上容器时，可以设置容器的读写优先权，权重值在10～1000之间，0为关闭权重(默认)</span><br><span class="line">	</span><br><span class="line">4. --blkio-weight-device list</span><br><span class="line">	说明: 设置针对指定设备的权重，权重值在10～1000之间，且优先级高于blkio.weight</span><br><span class="line">	示例: --blkio-weight-device &quot;&#x2F;dev&#x2F;sda:100&quot; ubuntu:latest</span><br><span class="line"></span><br><span class="line">5. --cap-add list</span><br><span class="line">	说明:增强linux能力，在docker容器内限制了大部分的linux能力，在之前，需要开启这些功能需要结合--privileged开启特权模式才能使用这些参数，考虑到安全性，可以通过该参数来开启指定的linux功能【默认开启的功能及全部定义详见docker runc】，若参数为all则默认开启所有linux能力</span><br><span class="line">	</span><br><span class="line">6. --cap-drop list</span><br><span class="line">	说明: 移除linux能力</span><br><span class="line">	</span><br><span class="line">7. --cgroup-parent str</span><br><span class="line">	说明: 配置容器的控制组，继承该控制组的资源限制模式。</span><br><span class="line">	</span><br><span class="line">8. --cidfile str</span><br><span class="line">	说明: 创建一个容器，并将该容器的id输出到某一文件中，若该文件存在，则会返回一个错误</span><br><span class="line">	</span><br><span class="line">9. --cpu-period int</span><br><span class="line">	说明： 与参数--cpu-quota配合使用，用于设定cpu从新分配资源的时间周期,时间周期结束后，会对cpu进行重新分配</span><br><span class="line">	</span><br><span class="line">10. --cpu-quota int </span><br><span class="line">	说明:与参数--cpu-period配合使用，用于设定该容器在资源分配周期内占用cpu的时间，若容器设定--cpu-quota&#x3D;1000000 --cpu-period&#x3D;500000，则该容器在这个时间周期内权重为50%，这两个参数主要是提升宿主机内某一容器的权重比，可以用来解决宿主机内若干容器的资源抢占导致重要容器cpu性能不足的场景。该模式应用于Linux 的CFS模式</span><br><span class="line"></span><br><span class="line">11. --cpu-rt-period int </span><br><span class="line">	说明: --cpu-period的微秒版</span><br><span class="line">	</span><br><span class="line">12. --cpu-rt-runtime int</span><br><span class="line">	说明: 在一个cpu资源分配周期内，优先保证某容器的cpu使用的最大微秒数。例如，默认周期为 1000000 微秒（1秒），设置 --cpu-rt-runtime&#x3D;950000 可确保使用实时调度程序的容器每 1000000 微秒可运行 950000 微秒，并保留至少 50000 微秒用于非实时任务</span><br><span class="line">	</span><br><span class="line">13. -c, --cpu-shares int</span><br><span class="line">	说明: CPU份额(相对权重),默认为0</span><br><span class="line">	</span><br><span class="line">14. --cpus decimal</span><br><span class="line">	说明: 设置容器使用cpu的数量</span><br><span class="line">	示例: --cpus&#x3D;&quot;.5&quot; ubuntu:latest</span><br><span class="line">	</span><br><span class="line">15. --cpuset-cpus str</span><br><span class="line">	说明: 设置容器允许在哪个cpu上执行该进程，譬如--cpuset-cpus&#x3D;&quot;1,3&quot;为指定在cpu 1 和cpu 3上执行，--cpuset-cpus&#x3D;&quot;0-2&quot;为指定在cpu0,cpu1,cpu2上执行</span><br><span class="line">	示例: --cpuset-cpus&#x3D;&quot;1,3&quot;</span><br><span class="line">	</span><br><span class="line">16. --cpuset-mems str</span><br><span class="line">    说明: 同参数--cpuset-cpus，但该参数是作用于NUMA 架构的 CPU</span><br><span class="line">    </span><br><span class="line">17.  -d, --detach</span><br><span class="line">	说明: 后台运行容器并返回容器ID</span><br><span class="line"></span><br><span class="line">18.  --detach-keys str</span><br><span class="line">	说明: 设置容器的键盘映射键位，在容器被链接到前台时，若宿主机的键盘键位与容器键位冲突，可以使用该指令对容器的键位进行重新映射</span><br><span class="line">	</span><br><span class="line">19. --device list</span><br><span class="line">	说明: 向容器中添加主机设备</span><br><span class="line">	</span><br><span class="line">20. --device-cgroup-rule list</span><br><span class="line">	说明: 将宿主机的设备添加到cgroup规则列表中</span><br><span class="line">	</span><br><span class="line">21.  --device-read-bps list</span><br><span class="line">	说明: 限制设备的读取速率(每秒字节数)</span><br><span class="line">22. --device-read-iops list</span><br><span class="line">	说明: 限制设备的读取速率(每秒IO操作次数)</span><br><span class="line">23. --device-write-bps list</span><br><span class="line">	说明: 限制设备的写速率(每秒字节数)</span><br><span class="line">24. --device-write-iops list</span><br><span class="line">	说明: 限制设备的写速率(每秒IO操作次数)</span><br><span class="line">25. --disable-content-trust	</span><br><span class="line">	说明: 忽略镜像的校验(默认为true)</span><br><span class="line">	</span><br><span class="line">26. --dns list</span><br><span class="line">	说明: 指定容器使用的DNS服务器,默认与主机一致</span><br><span class="line">27. --dns-option list</span><br><span class="line">	说明: 设置DNS选项，同修改&#x2F;etc&#x2F;resolv.conf文件</span><br><span class="line">28. --dns-search list</span><br><span class="line">	说明: 指定容器DNS搜索域名,默认与主机一致</span><br><span class="line">29. -entrypoint str</span><br><span class="line">	说明: 覆盖映像默认的entrypoint</span><br><span class="line">	</span><br><span class="line">30. -e, --env list</span><br><span class="line">	说明: 给容器设置环境变量</span><br><span class="line">31. --env-file list</span><br><span class="line">	说明: 从指定文件读取环境变量</span><br><span class="line">	</span><br><span class="line">32. --expose list</span><br><span class="line">	说明: 开放一个或多个端口</span><br><span class="line">33. --group-add list</span><br><span class="line">	说明: 为容器添加用户组</span><br><span class="line">	</span><br><span class="line">34. --health-cmd str</span><br><span class="line">	说明: 执行一个健康检查命令</span><br><span class="line">35. --health-interval duration</span><br><span class="line">	说明: 配合--health-cmd参数，设置健康检查的执行的间隔时间（ms &#x2F;s &#x2F; m &#x2F; h）</span><br><span class="line">36. --health-retries int</span><br><span class="line">	说明: 配合--health-cmd参数，设置健康检查命令失败重试的次数</span><br><span class="line">37. --health-statr-period duration</span><br><span class="line">	说明: 配合--health-cmd参数，设置健康检查的启动时间（ms &#x2F;s &#x2F; m &#x2F; h）</span><br><span class="line">38. --health-timout</span><br><span class="line">	说明: 配合--health-cmd参数，设置健康检查命令超时时间（ms &#x2F;s &#x2F; m &#x2F; h）</span><br><span class="line">	</span><br><span class="line">39. -h, --hostname str</span><br><span class="line">	说明: 指定容器的hostname</span><br><span class="line">	示例: docker run --name consul -p 8500:8500 -h consul -d progrium&#x2F;consul -server -bootstrap  </span><br><span class="line">	-h指定了容器的主机名为consul</span><br><span class="line">	</span><br><span class="line">40. --init</span><br><span class="line">	说明:	在容器中新增一个守护进程，来预防该容器出现僵尸进程的可能性</span><br><span class="line">	</span><br><span class="line">41. -i, --interactive</span><br><span class="line">	说明: 以交互模式运行容器,常与-t同时使用</span><br><span class="line">	</span><br><span class="line">42. --ip str </span><br><span class="line">	说明: 设置容器的IPv4地址</span><br><span class="line">43. --ip6 str</span><br><span class="line">	说明:	设置容器的IPv6地址</span><br><span class="line">	</span><br><span class="line">44. --ipc str</span><br><span class="line">	说明: 使用IPC模式</span><br><span class="line">45. --isolation str</span><br><span class="line">	说明: 使用容器隔离, 该参数拥有三个值&lt;br&gt;(1)default 即与使用dockerd --exec-opt的参数默认效果相同&lt;br&gt;(2)process 使用linux内核命名空间进行隔离，该参数不支持windows环境。&lt;br&gt;（3）使用微软的Hyper-V虚拟技术进行隔离，该参数仅限windows环境</span><br><span class="line">	</span><br><span class="line">46. --kernel-memory bytes</span><br><span class="line">	说明: 限制该容器内核的内存使用</span><br><span class="line">47. -l, --label list </span><br><span class="line">	说明: 设置该容器的元数据</span><br><span class="line">48. --label-file list</span><br><span class="line">	说明: 通过本地文件导入元数据至该容器</span><br><span class="line">	</span><br><span class="line">49. --link list</span><br><span class="line">	--link &lt;name or id&gt;:alias</span><br><span class="line">	其中，name和id是源容器的name和id，alias是源容器在link下的别名。</span><br><span class="line">	说明: 指定容器间的关联，使用其他容器的IP、env等信息</span><br><span class="line">	示例: docker run -it --name mycentos4 --restart&#x3D;always --link mycentos2:centos2 --link mycentos3:centos3  -d centos</span><br><span class="line"></span><br><span class="line">50. --link-local-ip list	</span><br><span class="line">	说明: 容器IPv4&#x2F;IPv6链路本地地址</span><br><span class="line"></span><br><span class="line">51. --log-driver str</span><br><span class="line">	说明: 设置日志工具，用于动态收集日志</span><br><span class="line">52. --log-opt list	</span><br><span class="line">	说明: 配合参数--log-driver使用，用于日志配置</span><br><span class="line">	</span><br><span class="line">53. --mac-address str</span><br><span class="line">	说明: 设置该容器mac地址</span><br><span class="line">	</span><br><span class="line">54. -m, --memory byte</span><br><span class="line">	说明: 设置容器使用的最大内存</span><br><span class="line">55. --memory-reservation bytes</span><br><span class="line">	说明: 软限制该容器的内存使用，当宿主机内存空闲时，该容器的内存使用可以一定比例超出限制，但当宿主机内存紧张时，会强制该容器内存使用限制在该参数之内</span><br><span class="line">	</span><br><span class="line">56. --memory-swap bytes</span><br><span class="line">	说明: 内存交换分区大小限制。配合参数--memory使用，且最小内存交换限制应该大于内存限制。该参数有4种情况:&lt;br&gt; (1)不设置--memory与该参数:则该容器默认可以用完宿舍机的所有内存和 宿主机 swap 分区。&lt;br&gt; (2)设置--memory 50MB 不设置--memory-swap（默认为0）:则--memory-swap值等于限制内存大小，即该容器能够申请的最大内存为100MB。&lt;br&gt; (3)设置--memory 50MB --memory-swap为-1:则该容器最大可以申请的内存为50MB+宿主机swap分区大小 &lt;br&gt; (4)设置--memory 50MB --memory-swap 100MB:则该容器可以申请的最大内存为100MB-50MB&#x3D;50MB</span><br><span class="line">	</span><br><span class="line">57. --memory-swappiness int</span><br><span class="line">	说明: 用于调整虚拟内存的控制行为，为0～100之间的整数。在linux内存管理中，将内存中不活跃的页交换至硬盘中，以缓解内存紧张，该参数设置为0则认定该容器所有内存中的内容均不允许交换至硬盘，用以保障最大性能，若设置为100，则认为该容器所有内存中的数据均可以交换至硬盘。</span><br><span class="line">	</span><br><span class="line">58. --mount mount</span><br><span class="line">	说明: 将文件系统挂载到容器</span><br><span class="line">59. --name str</span><br><span class="line">	说明: 为容器指定一个名称</span><br><span class="line">	</span><br><span class="line">60. --network str</span><br><span class="line">	说明: 将容器连接到网络，支持bridge&#x2F;host&#x2F;none&#x2F;container四种类型</span><br><span class="line">61. --network-alias list</span><br><span class="line">	说明: 设置该容器在网络上的别名</span><br><span class="line">62. --no-healthcheck</span><br><span class="line">	说明: 禁止一切健康检查行为</span><br><span class="line">63. --oom-kill-disable</span><br><span class="line">	说明: 设置是否禁止oom kill行为，若该容器因为需要大量请求内存，导致宿主机内存不足或触发到内存限制，导致杀死该容器进程，若设置该参数为true则会关闭这个检查</span><br><span class="line">	</span><br><span class="line">64. --oom-score-adj int</span><br><span class="line">	说明: 调整主机的OOM首选项（从-1000到1000）此处需要注意的是，非专业人士docker官方是不建议用户修改--oom-score-adj--oom-kill-disable这两个参数的</span><br><span class="line">	</span><br><span class="line">65. --pid string</span><br><span class="line">	说明: 设置该容器的pid</span><br><span class="line">66. --pids-limit int</span><br><span class="line">	说明: 限制该容器所能创建的最大进程数。默认-1不限制</span><br><span class="line">	</span><br><span class="line">67. --privileged</span><br><span class="line">	说明: 在该容器上开启特权模式，让该容器拥有所有的linux能力</span><br><span class="line">	</span><br><span class="line">68. -p, --publish list	</span><br><span class="line">	说明: 将容器的端口映射到宿主机上</span><br><span class="line">	示例: docker run -p 8000:8000 ubuntu</span><br><span class="line">	</span><br><span class="line">69. --publish-all</span><br><span class="line">	说明: 将该容器的所有端口均随机映射至宿主机</span><br><span class="line">70. --read-only</span><br><span class="line">	说明: 设置该容器只读</span><br><span class="line">71. --restart str</span><br><span class="line">	说明: 在退出该容器时重启该容器,默认为no</span><br><span class="line">	其他: --restart&#x3D;always 重启Docker时，容器自动启动。 </span><br><span class="line">	可以后期添加：docker container update --restart&#x3D;always 容器名</span><br><span class="line">	</span><br><span class="line">72. --rm</span><br><span class="line">	说明: 当容器退出时自动删除它</span><br><span class="line">	</span><br><span class="line">73. --runtime str</span><br><span class="line">	说明: 指定该容器关联一个runtime的容器，在使用该参数时注意runtime specified必须在dockerd --add-runtime注册过</span><br><span class="line">	</span><br><span class="line">74. --security-opt list</span><br><span class="line">	说明: 设置安全属性，在windows上使用CredentialSpec模块来执行身份识别</span><br><span class="line">75. --shm-size bytes</span><br><span class="line">	说明: 设置&#x2F;dev&#x2F;shm&#x2F;目录的大小</span><br><span class="line">	</span><br><span class="line">76. --sig-proxy</span><br><span class="line">	说明: 代理进程所接收的所有字符,当指定--sig-proxy&#x3D;false时，ctrl+c和ctrl+d 不会传递信号给docker进程而关闭容器,默认为true</span><br><span class="line">	</span><br><span class="line">77. --stop-signal str</span><br><span class="line">	说明: 停止带有信号的容器，在linux环境下输入kill -l,就可以看到所有信号名称，可以指定容器发出某种信号时停止该容器，譬如SIGKILL,默认为SIGTERM</span><br><span class="line">	</span><br><span class="line">78. --stop-timeout int</span><br><span class="line">	说明: 设置容器调用命令超时后自动退出。该参数可以设置容器在调用命令时导致超时后多少秒退出，0(默认)为永远不退出，该参数单位为秒</span><br><span class="line">	</span><br><span class="line">79. --storage-opt list</span><br><span class="line">	说明: 容器的存储设置,可以分别指定dm.basesize、dm.loopdatasize、dm.loopmetadatasize等项</span><br><span class="line">	示例: --storage-opt dm.basesize&#x3D;20G</span><br><span class="line">	</span><br><span class="line">80. --sysctl map</span><br><span class="line">	说明: 内核参数，对应修改容器中的&#x2F;etc&#x2F;sysctl.conf文件</span><br><span class="line">81. --tmpfs list</span><br><span class="line">	说明: 指定挂载一个tmpfs目录，tmpfs是一种虚拟内存文件系统。</span><br><span class="line">	</span><br><span class="line">82. -t, -tty	</span><br><span class="line">	说明: 打开一个伪终端,常与-i同时使用</span><br><span class="line">83. --ulimit ulimit</span><br><span class="line">	说明: 设置容器的ulimit选项</span><br><span class="line">	</span><br><span class="line">84. -u, --user str</span><br><span class="line">	说明: 用户名或UID</span><br><span class="line">	</span><br><span class="line">85.  --userns str</span><br><span class="line">	说明:</span><br><span class="line"></span><br><span class="line">86. --uts str</span><br><span class="line">	说明: 使用uts命名空间</span><br><span class="line">	</span><br><span class="line">87. -v, --volume list</span><br><span class="line">	说明: 在该容器下挂载卷 先在本地mkdir &#x2F;my&#x2F;own&#x2F;datadir 目录</span><br><span class="line">	示例: docker run --name some-mysql -v &#x2F;my&#x2F;own&#x2F;datadir:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;my-secret-pw -d mysql</span><br><span class="line">	</span><br><span class="line">88.  --volume-driver str</span><br><span class="line">	说明: 容器的可选卷驱动程序</span><br><span class="line">	</span><br><span class="line">89. --volumes-from list</span><br><span class="line">	说明: 从指定容器装入卷</span><br><span class="line">	</span><br><span class="line">90. -w, --workdir str</span><br><span class="line">	说明: 指定容器的工作目录</span><br></pre></td></tr></table></figure>



<p>4.10 <code>docker create [optoins] image [command] [arg...] // 创建一个新容器</code><br><strong>参数 同run</strong></p>
<h3 id="5-镜像管理"><a href="#5-镜像管理" class="headerlink" title="5. 镜像管理"></a>5. 镜像管理</h3><h4 id="5-1-docker-images-options-repository-tag-列出镜像"><a href="#5-1-docker-images-options-repository-tag-列出镜像" class="headerlink" title="5.1 docker images [options] [repository[:tag]] //列出镜像"></a>5.1 <code>docker images [options] [repository[:tag]] //列出镜像</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a  --all</code></td>
<td><code>列出所有镜像</code></td>
<td></td>
</tr>
<tr>
<td><code>--digests</code></td>
<td><code>显示摘要信息(sha256)</code></td>
<td></td>
</tr>
<tr>
<td><code>-f   --filter filter</code></td>
<td><code>过滤</code></td>
<td></td>
</tr>
<tr>
<td><code>--format str</code></td>
<td>``</td>
<td></td>
</tr>
<tr>
<td><code>--no-trunc</code></td>
<td>``</td>
<td></td>
</tr>
<tr>
<td><code>-q  --quiet</code></td>
<td><code>仅显示ID</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="5-2-docker-rmi-options-image-删除镜像"><a href="#5-2-docker-rmi-options-image-删除镜像" class="headerlink" title="5.2 docker rmi [options] image...//删除镜像"></a>5.2 <code>docker rmi [options] image...//删除镜像</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-f   --force</code></td>
<td><code>强制删除</code></td>
<td></td>
</tr>
<tr>
<td><code>--no-prune</code></td>
<td>``</td>
<td></td>
</tr>
</tbody></table>
<p>5.4 <code>docker tag src_image[:tag] tar_image[:tag] // 创建某个镜像的副本</code></p>
<p>示列：<code> docker image tag openspug/spug:latest  openspug/spug:v1</code></p>
<p>5.5 <code>docker history [options] image //查看指定镜像的创建历史。</code></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>--format str</code></td>
<td><code>使用Go模板打印漂亮的图像</code></td>
<td></td>
</tr>
<tr>
<td><code>-H   --human</code></td>
<td><code>以可读的形式打印日志和大小</code></td>
<td></td>
</tr>
<tr>
<td><code>--no-trunc</code></td>
<td><code>不截断输出</code></td>
<td></td>
</tr>
<tr>
<td><code>-q  --quiet</code></td>
<td>仅显示数字标识</td>
<td></td>
</tr>
</tbody></table>
<h4 id="5-6-docker-save-options-image-将指定镜像保存为tar归档文件"><a href="#5-6-docker-save-options-image-将指定镜像保存为tar归档文件" class="headerlink" title="5.6 docker save [options] image... //将指定镜像保存为tar归档文件"></a>5.6 <code>docker save [options] image... //将指定镜像保存为tar归档文件</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-o   --output str</code></td>
<td><code>输出至指定的文件</code></td>
<td></td>
</tr>
</tbody></table>
<p>5.6 <code>docker import [options] file/url/- [repository[:tag]] //由tar文档生成镜像</code></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-c ,  --change list</code></td>
<td><code>用dockerfile指令创建镜像</code></td>
<td></td>
</tr>
<tr>
<td><code>-m,   --message str</code></td>
<td><code>为创建的镜像设置描述信息</code></td>
<td></td>
</tr>
</tbody></table>
<h4 id="5-7-docker-build-options-path-url-使用dockerfile创建镜像"><a href="#5-7-docker-build-options-path-url-使用dockerfile创建镜像" class="headerlink" title="5.7 docker build [options] path / url / - //使用dockerfile创建镜像"></a>5.7 <code>docker build [options] path / url / - //使用dockerfile创建镜像</code></h4><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>--add-host list</code></td>
<td>``</td>
<td></td>
</tr>
<tr>
<td><code>--build-arg list</code></td>
<td><code>设置镜像创建时的变量</code></td>
<td></td>
</tr>
<tr>
<td><code>--cache-from str</code></td>
<td>``</td>
<td></td>
</tr>
<tr>
<td><code>--cgroup-parent str</code></td>
<td>``</td>
<td></td>
</tr>
<tr>
<td><code>--compress</code></td>
<td><code>使用zip压缩构建上下文</code></td>
<td></td>
</tr>
<tr>
<td><code>--cpu-period int</code></td>
<td><code>限制 CPU CFS周期</code></td>
<td></td>
</tr>
<tr>
<td><code>--cpu-quota int</code></td>
<td><code>限制 CPU CFS配额</code></td>
<td></td>
</tr>
<tr>
<td><code>-c   --cpu-shars int</code></td>
<td><code>设置 cpu 使用权重</code></td>
<td></td>
</tr>
<tr>
<td><code>--cpuset-cpus str</code></td>
<td><code>指定使用的CPU id</code></td>
<td></td>
</tr>
<tr>
<td><code>--cpuset-mems str</code></td>
<td><code>指定使用的内存 id</code></td>
<td></td>
</tr>
<tr>
<td><code>--disable-content-trust</code></td>
<td><code>忽略校验，默认开启</code></td>
<td></td>
</tr>
<tr>
<td><code>-f   --file str</code></td>
<td><code>指定要使用的Dockerfile路径</code></td>
<td></td>
</tr>
<tr>
<td><code>--force-rm</code></td>
<td><code>设置镜像过程中删除中间容器</code></td>
<td></td>
</tr>
<tr>
<td><code>--iidfile str</code></td>
<td><code>指定保存镜像id的文件</code></td>
<td></td>
</tr>
<tr>
<td><code>--isolation str</code></td>
<td><code>使用容器隔离技术</code></td>
<td></td>
</tr>
<tr>
<td><code>--label list</code></td>
<td><code>设置镜像使用的元数据</code></td>
<td></td>
</tr>
<tr>
<td><code>-m   --memory bytes</code></td>
<td><code>设置内存最大值</code></td>
<td></td>
</tr>
<tr>
<td><code>--memory-swap bytes</code></td>
<td><code>设置Swap的最大值为内存+swap，&quot;-1&quot;表示不限swap</code></td>
<td></td>
</tr>
<tr>
<td><code>--network str</code></td>
<td><code>设置镜像网络模式</code></td>
<td></td>
</tr>
<tr>
<td><code>--no-cache</code></td>
<td><code>创建镜像的过程不使用缓存</code></td>
<td></td>
</tr>
<tr>
<td><code>--pull</code></td>
<td><code>尝试去更新镜像的新版本</code></td>
<td></td>
</tr>
<tr>
<td><code>-q,   --quiet</code></td>
<td><code>只输出镜像ID</code></td>
<td></td>
</tr>
<tr>
<td><code>--rm</code></td>
<td><code>设置镜像成功后删除中间容器</code></td>
<td></td>
</tr>
<tr>
<td><code>--security-opt str</code></td>
<td><code>安全设置</code></td>
<td></td>
</tr>
<tr>
<td><code>--shm-size bytes</code></td>
<td><code>设置/dev/shm的大小，默认值是64M</code></td>
<td></td>
</tr>
<tr>
<td><code>-t,   --tag list</code></td>
<td><code>指定要创建的目标镜像名</code></td>
<td></td>
</tr>
<tr>
<td><code>--target str</code></td>
<td><code>设置要生成的目标生成阶段</code></td>
<td></td>
</tr>
<tr>
<td><code>--ulimit ulimit</code></td>
<td><code>Ulimit配置</code></td>
<td></td>
</tr>
</tbody></table>
<h3 id="6，volume卷管理"><a href="#6，volume卷管理" class="headerlink" title="6，volume卷管理"></a>6，volume卷管理</h3><p>docker volume 可以理解成一个container中的磁盘,既可以跟随container的生命周期（在Dockerfile 中定义使用VOLUME关键字），也可以单独创建，永久存储，直到用docker volume rm 命令删除。</p>
<p>1.查看volume</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure>

<p>2.创建volume </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker volume create [options] 卷名 </span><br><span class="line">options选项有两个参数</span><br><span class="line">	-d  指定存储设备，默认是local </span><br><span class="line">	-o  直接卷的存储路径 默认是 map[]</span><br><span class="line">示例1: </span><br><span class="line">	docker volume create -d local-persist -o mountpoint&#x3D;&#x2F;data&#x2F;images --name&#x3D;myvoluem</span><br><span class="line">示例2: 参数默认</span><br><span class="line"> 	docker volume create vo_logs </span><br><span class="line"> 	这时候卷的存放路径是&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;vo_logs&#x2F;_data</span><br></pre></td></tr></table></figure>

<p>  3.查看volume的详细信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect vo_logs</span><br></pre></td></tr></table></figure>

<p>4.删除卷</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm -f vo_logs</span><br><span class="line"> -f 表示强制删除</span><br><span class="line"> </span><br><span class="line">docker volume prune [options]</span><br><span class="line">删除未被任何容器使用的本地卷 </span><br><span class="line">--filter 提供过滤值</span><br><span class="line">-f , --force  不提示确认信息，直接删除</span><br></pre></td></tr></table></figure>

<p>5.卷的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -t --name mysql --restart&#x3D;always -p 3306:3306 -v myvoluem:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;mypassword -d mysql</span><br><span class="line"></span><br><span class="line">这时候容器里的&#x2F;var&#x2F;lib&#x2F;mysql的数据就存在myvoluem这个数据卷里了，</span><br><span class="line"></span><br><span class="line">第二种是本地挂载</span><br><span class="line">绑定宿主目录的概念很容易理解，就是将宿主目录绑定到容器中的某个目录位置。这样容器可以直接访问宿主目录的文件。其形式是</span><br><span class="line">docker run --name some-mysql -v &#x2F;my&#x2F;own&#x2F;datadir:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;my-secret-pw -d mysql</span><br></pre></td></tr></table></figure>

<p>6.卷和挂载目录有什么区别？</p>
<p>卷 (Docker Volume) 是受控存储，是由 Docker 引擎进行管理维护的。因此使用卷，你可以不必处理 uid、SELinux 等各种权限问题，Docker 引擎在建立卷时会自动添加安全规则，以及根据挂载点调整权限。并且可以统一列表、添加、删除。另外，除了本地卷外，还支持网络卷、分布式卷。</p>
<p>而挂载目录那就没人管了，属于用户自行维护。你就必须手动处理所有权限问题。特别是在 CentOS 上，很多人碰到 Permission Denied，就是因为没有使用卷，而是挂载目录，而且还对 SELinux 安全权限一无所知导致。</p>
<h3 id="7-其他命令"><a href="#7-其他命令" class="headerlink" title="7. 其他命令"></a>7. 其他命令</h3><p>7.1 <code>docker info //显示docker系统信息</code></p>
<p>7.2 <code>docker  version 或者docker -v // 显示docker相关的版本信息</code></p>
</div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://yc6.cool/2020/08/04/docker_命令大全/">docker命令大全</a></li><li><strong>本文作者：</strong><a href="https://yc6.cool">yichen</a></li><li><strong>本文链接：</strong><a href="https://yc6.cool/2020/08/04/docker_命令大全/">https://yc6.cool/2020/08/04/docker_命令大全/</a></li><li><strong>版权声明：</strong><span>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</span></li></ul><div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2023/05/17/Kubernetes%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2/" target="_blank">Kubernetes高可用集群二进制部署</a><br></span><span>  2.<a class="is-size-6" href="/2022/03/12/openresty%E7%BB%93%E5%90%88lua%E5%AF%B9%E5%90%8C%E4%B8%80%E6%9D%A1%E5%9F%9F%E5%90%8D%E5%88%A4%E6%96%AD%E5%8F%82%E6%95%B0%E5%81%9A%E8%B4%9F%E8%BD%BD/" target="_blank">openresty结合lua对域名参数做负载均衡</a><br></span><span>  3.<a class="is-size-6" href="/2021/07/31/nginx%E5%88%A4%E6%96%AD%E5%BE%AE%E4%BF%A1%E7%AB%AF%E8%B7%B3%E8%BD%AC%E4%B8%8D%E5%90%8C%E9%A1%B5%E9%9D%A2/" target="_blank">nginx判断微信端跳转不同页面</a><br></span><span>  4.<a class="is-size-6" href="/2020/09/30/nftables/" target="_blank">nftables</a><br></span><span>  5.<a class="is-size-6" href="/2020/08/04/k8s%E4%B8%ADYAML%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99%E4%B8%8E%E4%BD%BF%E7%94%A8/" target="_blank">k8s中yaml文件编写与使用</a><br></span><span>  6.<a class="is-size-6" href="/2020/08/04/k8s%E6%90%AD%E5%BB%BA/" target="_blank">kubernetes搭建</a><br></span><span>  7.<a class="is-size-6" href="/2020/08/04/%E5%88%9B%E5%BB%BAcentos%E9%95%9C%E5%83%8F%E6%94%AF%E6%8C%81ssh/" target="_blank">创建centos镜像支持ssh远程连接</a><br></span><span>  8.<a class="is-size-6" href="/2020/08/04/docker%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E9%85%B7Q%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/" target="_blank">docke一键安装酷Q搭建个人QQ机器人</a><br></span></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/2020/08/04/docker%E4%BD%BF%E7%94%A8/" target="_blank">docker的使用</a><br></span><span>  2.<a class="is-size-6" href="/2020/08/03/mysql%E5%9F%BA%E7%A1%80/" target="_blank">mysql基础</a><br></span><span>  3.<a class="is-size-6" href="/2020/08/03/nginx%E5%9F%BA%E7%A1%80/" target="_blank">nginx基础</a><br></span><span>  4.<a class="is-size-6" href="/2020/08/04/python3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%87%8D%E7%82%B9/" target="_blank">python3基础知识重点</a><br></span><span>  5.<a class="is-size-6" href="/2023/05/07/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/" target="_blank">Prometheus监控linux</a><br></span><span>  6.<a class="is-size-6" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E9%82%AE%E7%AE%B1%E6%8E%A5%E6%94%B6%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/" target="_blank">Prometheus使用邮件接收告警通知</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="https://yichenxiu.com/tupian/tubiao/alipay1.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="https://i.328888.xyz/2023/03/05/dZXCk.jpeg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/08/04/docker-compose%E7%94%A8%E6%B3%95/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">docker-compose的用法</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/04/docker%E4%BD%BF%E7%94%A8/"><span class="level-item">docker的使用</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: '7df320a47cfd83c953eff12f56a74bc5',
            repo: 'issue_database',
            owner: 'zhi666',
            clientID: '1b861f81e9a79ee6028d',
            clientSecret: 'cc629aff090aa9c60d5e13ddf7fcfce14f00a478',
            admin: ["zhi666"],
            createIssueManually: true,
            distractionFreeMode: true,
            perPage: 10,
            pagerDirection: 'last',
            proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget toc-scroll" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-docker-命令大全" href="#docker-命令大全"><span>docker 命令大全</span></a><ul class="menu-list toc"><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-镜像仓库" href="#1-镜像仓库"><span>1. 镜像仓库</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-6-docker-logs-OPTIONS-CONTAINER-获取容器的日志" href="#2-6-docker-logs-OPTIONS-CONTAINER-获取容器的日志"><span>2.6 docker logs [OPTIONS] CONTAINER &amp;#x2F;&amp;#x2F;获取容器的日志</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-2-docker-cp-容器与主机之间的文件复制" href="#3-2-docker-cp-容器与主机之间的文件复制"><span>3.2 docker cp &amp;#x2F;&amp;#x2F; 容器与主机之间的文件复制</span></a></li><li><a class="is-flex toc-item" id="toc-item-4-9-1-选项有90个" href="#4-9-1-选项有90个"><span>4.9.1 选项有90个</span></a></li><li><a class="is-flex toc-item" id="toc-item-5-7-docker-build-options-path-url-使用dockerfile创建镜像" href="#5-7-docker-build-options-path-url-使用dockerfile创建镜像"><span>5.7 docker build [options] path &amp;#x2F; url &amp;#x2F; - &amp;#x2F;&amp;#x2F;使用dockerfile创建镜像</span></a></li><li><a class="is-flex toc-item" id="toc-item-6，volume卷管理" href="#6，volume卷管理"><span>6，volume卷管理</span></a></li><li><a class="is-flex toc-item" id="toc-item-7-其他命令" href="#7-其他命令"><span>7. 其他命令</span></a></li></ul></ul></li></ul></div></div><script type="text/javascript" async>
        $(document).ready(function () { //参考自 https://github.com/ppoffice/hexo-theme-icarus/pull/616/files
            var observerTopMargin;
            var scrollObserver;
            var headerElems = $(".headerlink");
            var activeTocItem;
        
            function initIntersectionObserver(docHeight) {
                observerTopMargin = docHeight;
                scrollObserver = new IntersectionObserver(scrollCallBack,
                    {
                        root: null,  // viewpoint
                        rootMargin: docHeight + "px 0px -80% 0px"  // cover top 30% of viewport to the top of document
                    })
            }
        
            function scrollCallBack(entries, observer) {
                if ($(window).scrollTop() > observerTopMargin * 0.7) { 
                    // User somehow scroll to 70% of observerTopMargin (which is inited as 200% document height)
                    // Observer top margin need to extend to cover all the space to the top of the document
                    initIntersectionObserver(observerTopMargin * 2)
                    observer.disconnect();
                    return;
                }
                let toActive;
                if (entries[0].intersectionRatio == 1) {  // enter viewed area
                    let entry = entries.reduce((u, v) => (u.target.toc_id > v.target.toc_id ? u : v));  // get the lowest item
                    toActive = $("#toc-item-" + $(entry.target).attr("href").substr(1));
                } else {
                    let entry = entries.reduce((u, v) => (u.target.toc_id < v.target.toc_id ? u : v));  // get the highest item
                    let idx = Math.max(entry.target.toc_id - 1, 0);
                    toActive = $("#toc-item-" + $(headerElems[idx]).attr("href").substr(1));
                }
                if (activeTocItem) activeTocItem.removeClass("is-current");
                activeTocItem = toActive
                activeTocItem.addClass("is-current");
            }
        
            initIntersectionObserver($(document).height() * 2);
            headerElems.each(function (index, obj) {
                obj.toc_id = index;
                scrollObserver.observe(obj);
            })
        });</script></div><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="/img/toudong.jpg" alt="逸尘秀"></figure><p class="title is-size-4 is-block line-height-inherit">逸尘秀</p><p class="is-size-6 is-block">只此一生 ， 必须快乐 ！</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>深圳</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">136</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">55</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://weibo.com/u/6155656382" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/zhi666"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/u/6155656382"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:1378373724@qq.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Next" href="https://zhi666.github.io/remove.io"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2023-11-01T02:25:44.578Z">2023-11-01</time></p><p class="title is-6"><a class="link-muted" href="/2023/11/01/selenlium%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0dns%E5%9F%9F%E5%90%8D/">批量添加dns域名解析</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/python/">python</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-17T01:45:36.000Z">2023-05-17</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/17/Kubernetes%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E4%BA%8C%E8%BF%9B%E5%88%B6%E9%83%A8%E7%BD%B2/">Kubernetes高可用集群二进制部署</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux3/">linux3</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-10T06:25:36.000Z">2023-05-10</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E6%89%8B%E6%9C%BA%E7%94%B5%E8%AF%9D_%E7%9F%AD%E4%BF%A1%E6%8E%A5%E6%94%B6%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/">Prometheus使用手机电话_短信接收告警通知</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux2/">linux2</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-10T06:22:36.000Z">2023-05-10</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%8E%A5%E6%94%B6%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/">Prometheus使用企业微信接收告警通知</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux2/">linux2</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2023-05-10T06:20:36.000Z">2023-05-10</time></p><p class="title is-6"><a class="link-muted" href="/2023/05/10/Prometheus%E4%BD%BF%E7%94%A8%E4%BC%81%E4%B8%9A%E9%92%89%E9%92%89%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5/">Prometheus使用企业钉钉接收告警通知</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/linux2/">linux2</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/English/"><span class="level-start"><span class="level-item">English</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/HTML/"><span class="level-start"><span class="level-item">HTML</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JS/"><span class="level-start"><span class="level-item">JS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/html/"><span class="level-start"><span class="level-item">html</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux1/"><span class="level-start"><span class="level-item">linux1</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux2/"><span class="level-start"><span class="level-item">linux2</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux3/"><span class="level-start"><span class="level-item">linux3</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/web/"><span class="level-start"><span class="level-item">web</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/work/"><span class="level-start"><span class="level-item">work</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/05/"><span class="level-start"><span class="level-item">五月 2023</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/04/"><span class="level-start"><span class="level-item">四月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag is-grey-lightest">18</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%B9%E5%99%A8/"><span class="tag">容器</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">数据库</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"><span class="tag">科学上网</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/work/"><span class="tag">work</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"><span class="tag">自动化</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E4%BD%9C/"><span class="tag">工作</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tag">工具</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssl/"><span class="tag">ssl</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><span class="tag">文件系统</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%BF%97/"><span class="tag">日志</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%BF%97%E5%8A%A0%E5%AF%86/"><span class="tag">日志加密</span><span class="tag is-grey-lightest">3</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=zhi666FeedsId&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="zhi666FeedsId" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div><p class="help">输入邮箱开始订阅，更博后邮件通知！</p></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="逸尘秀" height="28"></a><p class="size-small"><span>&copy; 2023 yichen</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>,Modify by <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">removeif</a> <br><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2020/08/02 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhi666"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="2364053447" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://yc6.cool',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.12/js/lightgallery-all.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><!--!--><!--!--><!--!--><script src="/js/toc.js" defer></script><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('1b861f81e9a79ee6028d','cc629aff090aa9c60d5e13ddf7fcfce14f00a478','zhi666','issue_database',false);})</script><link rel="stylesheet" href="/css/insight.css"><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>(function (window) {
            var INSIGHT_CONFIG = {
                TRANSLATION: {
                    POSTS: '文章',
                    PAGES: '页面',
                    CATEGORIES: '分类',
                    TAGS: '标签',
                    UNTITLED: '(无标题)',
                },
                CONTENT_URL: '/content.json',
            };
            window.INSIGHT_CONFIG = INSIGHT_CONFIG;
        })(window);</script><script src="/js/insight.js" defer></script></body></html>